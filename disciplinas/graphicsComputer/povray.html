<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="generator" content="AsciiDoc 8.6.8">
<title></title>
<style type="text/css">
/* Shared CSS for AsciiDoc xhtml11 and html5 backends */

/* Default font. */
body {
  font-family: Georgia,serif;
}

/* Title font. */
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Arial,Helvetica,sans-serif;
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}
h5 {
  font-size: 1.0em;
}

div.sectionbody {
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}
ul > li     { color: #aaa; }
ul > li > * { color: black; }

pre {
  padding: 0;
  margin: 0;
}

#author {
  color: #527bbd;
  font-weight: bold;
  font-size: 1.1em;
}
#email {
}
#revnumber, #revdate, #revremark {
}

#footer {
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

#preamble {
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.0em;
  margin-bottom: 2.0em;
  margin-right: 10%;
  color: #606060;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid #dddddd;
  border-left: 4px solid #f0f0f0;
  padding: 0.5em;
}

div.listingblock > div.content {
  border: 1px solid #dddddd;
  border-left: 5px solid #f0f0f0;
  background: #f8f8f8;
  padding: 0.5em;
}

div.quoteblock, div.verseblock {
  padding-left: 1.0em;
  margin-left: 1.0em;
  margin-right: 10%;
  border-left: 5px solid #f0f0f0;
  color: #777777;
}

div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock > pre.content {
  font-family: inherit;
  font-size: inherit;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 3px solid #dddddd;
}

div.exampleblock > div.content {
  border-left: 3px solid #dddddd;
  padding-left: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
span.image img { border-style: none; }
a.image:visited { color: white; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
  color: navy;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
ol.arabic {
  list-style-type: decimal;
}
ol.loweralpha {
  list-style-type: lower-alpha;
}
ol.upperalpha {
  list-style-type: upper-alpha;
}
ol.lowerroman {
  list-style-type: lower-roman;
}
ol.upperroman {
  list-style-type: upper-roman;
}

div.compact ul, div.compact ol,
div.compact p, div.compact p,
div.compact div, div.compact div {
  margin-top: 0.1em;
  margin-bottom: 0.1em;
}

tfoot {
  font-weight: bold;
}
td > div.verse {
  white-space: pre;
}

div.hdlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hdlist tr {
  padding-bottom: 15px;
}
dt.hdlist1.strong, td.hdlist1.strong {
  font-weight: bold;
}
td.hdlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
  color: navy;
}
td.hdlist2 {
  vertical-align: top;
}
div.hdlist.compact tr {
  margin: 0;
  padding-bottom: 0;
}

.comment {
  background: yellow;
}

.footnote, .footnoteref {
  font-size: 0.8em;
}

span.footnote, span.footnoteref {
  vertical-align: super;
}

#footnotes {
  margin: 20px 0 20px 0;
  padding: 7px 0 0 0;
}

#footnotes div.footnote {
  margin: 0 0 5px 0;
}

#footnotes hr {
  border: none;
  border-top: 1px solid silver;
  height: 1px;
  text-align: left;
  margin-left: 0;
  width: 20%;
  min-width: 100px;
}

div.colist td {
  padding-right: 0.5em;
  padding-bottom: 0.3em;
  vertical-align: top;
}
div.colist td img {
  margin-top: 0.3em;
}

@media print {
  #footer-badges { display: none; }
}

#toc {
  margin-bottom: 2.5em;
}

#toctitle {
  color: #527bbd;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}

span.aqua { color: aqua; }
span.black { color: black; }
span.blue { color: blue; }
span.fuchsia { color: fuchsia; }
span.gray { color: gray; }
span.green { color: green; }
span.lime { color: lime; }
span.maroon { color: maroon; }
span.navy { color: navy; }
span.olive { color: olive; }
span.purple { color: purple; }
span.red { color: red; }
span.silver { color: silver; }
span.teal { color: teal; }
span.white { color: white; }
span.yellow { color: yellow; }

span.aqua-background { background: aqua; }
span.black-background { background: black; }
span.blue-background { background: blue; }
span.fuchsia-background { background: fuchsia; }
span.gray-background { background: gray; }
span.green-background { background: green; }
span.lime-background { background: lime; }
span.maroon-background { background: maroon; }
span.navy-background { background: navy; }
span.olive-background { background: olive; }
span.purple-background { background: purple; }
span.red-background { background: red; }
span.silver-background { background: silver; }
span.teal-background { background: teal; }
span.white-background { background: white; }
span.yellow-background { background: yellow; }

span.big { font-size: 2em; }
span.small { font-size: 0.6em; }

span.underline { text-decoration: underline; }
span.overline { text-decoration: overline; }
span.line-through { text-decoration: line-through; }


/*
 * xhtml11 specific
 *
 * */

tt {
  font-family: monospace;
  font-size: inherit;
  color: navy;
}

div.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
div.tableblock > table {
  border: 3px solid #527bbd;
}
thead, p.table.header {
  font-weight: bold;
  color: #527bbd;
}
p.table {
  margin-top: 0;
}
/* Because the table frame attribute is overriden by CSS in most browsers. */
div.tableblock > table[frame="void"] {
  border-style: none;
}
div.tableblock > table[frame="hsides"] {
  border-left-style: none;
  border-right-style: none;
}
div.tableblock > table[frame="vsides"] {
  border-top-style: none;
  border-bottom-style: none;
}


/*
 * html5 specific
 *
 * */

.monospaced {
  font-family: monospace;
  font-size: inherit;
  color: navy;
}

table.tableblock {
  margin-top: 1.0em;
  margin-bottom: 1.5em;
}
thead, p.tableblock.header {
  font-weight: bold;
  color: #527bbd;
}
p.tableblock {
  margin-top: 0;
}
table.tableblock {
  border-width: 3px;
  border-spacing: 0px;
  border-style: solid;
  border-color: #527bbd;
  border-collapse: collapse;
}
th.tableblock, td.tableblock {
  border-width: 1px;
  padding: 4px;
  border-style: solid;
  border-color: #527bbd;
}

table.tableblock.frame-topbot {
  border-left-style: hidden;
  border-right-style: hidden;
}
table.tableblock.frame-sides {
  border-top-style: hidden;
  border-bottom-style: hidden;
}
table.tableblock.frame-none {
  border-style: hidden;
}

th.tableblock.halign-left, td.tableblock.halign-left {
  text-align: left;
}
th.tableblock.halign-center, td.tableblock.halign-center {
  text-align: center;
}
th.tableblock.halign-right, td.tableblock.halign-right {
  text-align: right;
}

th.tableblock.valign-top, td.tableblock.valign-top {
  vertical-align: top;
}
th.tableblock.valign-middle, td.tableblock.valign-middle {
  vertical-align: middle;
}
th.tableblock.valign-bottom, td.tableblock.valign-bottom {
  vertical-align: bottom;
}


/*
 * manpage specific
 *
 * */

body.manpage h1 {
  padding-top: 0.5em;
  padding-bottom: 0.5em;
  border-top: 2px solid silver;
  border-bottom: 2px solid silver;
}
body.manpage h2 {
  border-style: none;
}
body.manpage div.sectionbody {
  margin-left: 3em;
}

@media print {
  body.manpage div#toc { display: none; }
}


/*
 * Theme specific overrides of the preceding (asciidoc.css) CSS.
 *
 */
body {
  font-family: Garamond, Georgia, serif;
  font-size: 17px;
  color: #3E4349;
  line-height: 1.3em;
}
h1, h2, h3, h4, h5, h6,
div.title, caption.title,
thead, p.table.header,
#toctitle,
#author, #revnumber, #revdate, #revremark,
#footer {
  font-family: Garmond, Georgia, serif;
  font-weight: normal;
  border-bottom-width: 0;
  color: #3E4349;
}
div.title, caption.title { color: #596673; font-weight: bold; }
h1 { font-size: 240%; }
h2 { font-size: 180%; }
h3 { font-size: 150%; }
h4 { font-size: 130%; }
h5 { font-size: 115%; }
h6 { font-size: 100%; }
#header h1 { margin-top: 0; }
#toc {
  color: #444444;
  line-height: 1.5;
  padding-top: 1.5em;
}
#toctitle {
  font-size: 20px;
}
#toc a {
    border-bottom: 1px dotted #999999;
    color: #444444 !important;
    text-decoration: none !important;
}
#toc a:hover {
    border-bottom: 1px solid #6D4100;
    color: #6D4100 !important;
    text-decoration: none !important;
}
div.toclevel1 { margin-top: 0.2em; font-size: 16px; }
div.toclevel2 { margin-top: 0.15em; font-size: 14px; }
em, dt, td.hdlist1 { color: black; }
strong { color: #3E4349; }
a { color: #004B6B; text-decoration: none; border-bottom: 1px dotted #004B6B; }
a:visited { color: #615FA0; border-bottom: 1px dotted #615FA0; }
a:hover { color: #6D4100; border-bottom: 1px solid #6D4100; }
div.tableblock > table, table.tableblock { border: 3px solid #E8E8E8; }
th.tableblock, td.tableblock { border: 1px solid #E8E8E8; }
ul > li > * { color: #3E4349; }
pre, tt, .monospaced { font-family: Consolas,Menlo,'Deja Vu Sans Mono','Bitstream Vera Sans Mono',monospace; }
tt, .monospaced { font-size: 0.9em; color: black;
}
div.exampleblock > div.content, div.sidebarblock > div.content, div.listingblock > div.content { border-width: 0 0 0 3px; border-color: #E8E8E8; }
div.verseblock { border-left-width: 0; margin-left: 3em; }
div.quoteblock { border-left-width: 3px; margin-left: 0; margin-right: 0;}
div.admonitionblock td.content { border-left: 3px solid #E8E8E8; }


@media screen {
  body {
    max-width: 50em; /* approximately 80 characters wide */
    margin-left: 16em;
  }

  #toc {
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    width: 13em;
    padding: 0.5em;
    padding-bottom: 1.5em;
    margin: 0;
    overflow: auto;
    border-right: 3px solid #f8f8f8;
    background-color: white;
  }

  #toc .toclevel1 {
    margin-top: 0.5em;
  }

  #toc .toclevel2 {
    margin-top: 0.25em;
    display: list-item;
    color: #aaaaaa;
  }

  #toctitle {
    margin-top: 0.5em;
  }
}
</style>
<script type="text/javascript">
/*<![CDATA[*/
var asciidoc = {  // Namespace.

/////////////////////////////////////////////////////////////////////
// Table Of Contents generator
/////////////////////////////////////////////////////////////////////

/* Author: Mihai Bazon, September 2002
 * http://students.infoiasi.ro/~mishoo
 *
 * Table Of Content generator
 * Version: 0.4
 *
 * Feel free to use this script under the terms of the GNU General Public
 * License, as long as you do not remove or alter this notice.
 */

 /* modified by Troy D. Hanson, September 2006. License: GPL */
 /* modified by Stuart Rackham, 2006, 2009. License: GPL */

// toclevels = 1..4.
toc: function (toclevels) {

  function getText(el) {
    var text = "";
    for (var i = el.firstChild; i != null; i = i.nextSibling) {
      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
        text += i.data;
      else if (i.firstChild != null)
        text += getText(i);
    }
    return text;
  }

  function TocEntry(el, text, toclevel) {
    this.element = el;
    this.text = text;
    this.toclevel = toclevel;
  }

  function tocEntries(el, toclevels) {
    var result = new Array;
    var re = new RegExp('[hH]([1-'+(toclevels+1)+'])');
    // Function that scans the DOM tree for header elements (the DOM2
    // nodeIterator API would be a better technique but not supported by all
    // browsers).
    var iterate = function (el) {
      for (var i = el.firstChild; i != null; i = i.nextSibling) {
        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
          var mo = re.exec(i.tagName);
          if (mo && (i.getAttribute("class") || i.getAttribute("className")) != "float") {
            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
          }
          iterate(i);
        }
      }
    }
    iterate(el);
    return result;
  }

  var toc = document.getElementById("toc");
  if (!toc) {
    return;
  }

  // Delete existing TOC entries in case we're reloading the TOC.
  var tocEntriesToRemove = [];
  var i;
  for (i = 0; i < toc.childNodes.length; i++) {
    var entry = toc.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div'
     && entry.getAttribute("class")
     && entry.getAttribute("class").match(/^toclevel/))
      tocEntriesToRemove.push(entry);
  }
  for (i = 0; i < tocEntriesToRemove.length; i++) {
    toc.removeChild(tocEntriesToRemove[i]);
  }

  // Rebuild TOC entries.
  var entries = tocEntries(document.getElementById("content"), toclevels);
  for (var i = 0; i < entries.length; ++i) {
    var entry = entries[i];
    if (entry.element.id == "")
      entry.element.id = "_toc_" + i;
    var a = document.createElement("a");
    a.href = "#" + entry.element.id;
    a.appendChild(document.createTextNode(entry.text));
    var div = document.createElement("div");
    div.appendChild(a);
    div.className = "toclevel" + entry.toclevel;
    toc.appendChild(div);
  }
  if (entries.length == 0)
    toc.parentNode.removeChild(toc);
},


/////////////////////////////////////////////////////////////////////
// Footnotes generator
/////////////////////////////////////////////////////////////////////

/* Based on footnote generation code from:
 * http://www.brandspankingnew.net/archive/2005/07/format_footnote.html
 */

footnotes: function () {
  // Delete existing footnote entries in case we're reloading the footnodes.
  var i;
  var noteholder = document.getElementById("footnotes");
  if (!noteholder) {
    return;
  }
  var entriesToRemove = [];
  for (i = 0; i < noteholder.childNodes.length; i++) {
    var entry = noteholder.childNodes[i];
    if (entry.nodeName.toLowerCase() == 'div' && entry.getAttribute("class") == "footnote")
      entriesToRemove.push(entry);
  }
  for (i = 0; i < entriesToRemove.length; i++) {
    noteholder.removeChild(entriesToRemove[i]);
  }

  // Rebuild footnote entries.
  var cont = document.getElementById("content");
  var spans = cont.getElementsByTagName("span");
  var refs = {};
  var n = 0;
  for (i=0; i<spans.length; i++) {
    if (spans[i].className == "footnote") {
      n++;
      var note = spans[i].getAttribute("data-note");
      if (!note) {
        // Use [\s\S] in place of . so multi-line matches work.
        // Because JavaScript has no s (dotall) regex flag.
        note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
        spans[i].innerHTML =
          "[<a id='_footnoteref_" + n + "' href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
        spans[i].setAttribute("data-note", note);
      }
      noteholder.innerHTML +=
        "<div class='footnote' id='_footnote_" + n + "'>" +
        "<a href='#_footnoteref_" + n + "' title='Return to text'>" +
        n + "</a>. " + note + "</div>";
      var id =spans[i].getAttribute("id");
      if (id != null) refs["#"+id] = n;
    }
  }
  if (n == 0)
    noteholder.parentNode.removeChild(noteholder);
  else {
    // Process footnoterefs.
    for (i=0; i<spans.length; i++) {
      if (spans[i].className == "footnoteref") {
        var href = spans[i].getElementsByTagName("a")[0].getAttribute("href");
        href = href.match(/#.*/)[0];  // Because IE return full URL.
        n = refs[href];
        spans[i].innerHTML =
          "[<a href='#_footnote_" + n +
          "' title='View footnote' class='footnote'>" + n + "</a>]";
      }
    }
  }
},

install: function(toclevels) {
  var timerId;

  function reinstall() {
    asciidoc.footnotes();
    if (toclevels) {
      asciidoc.toc(toclevels);
    }
  }

  function reinstallAndRemoveTimer() {
    clearInterval(timerId);
    reinstall();
  }

  timerId = setInterval(reinstall, 500);
  if (document.addEventListener)
    document.addEventListener("DOMContentLoaded", reinstallAndRemoveTimer, false);
  else
    window.onload = reinstallAndRemoveTimer;
}

}
asciidoc.install(2);
/*]]>*/
</script>
<script type="text/javascript">
/*<![CDATA[*/
/*
LaTeXMathML.js
==============

This file, in this form, is due to Douglas Woodall, June 2006.
It contains JavaScript functions to convert (most simple) LaTeX
math notation to Presentation MathML.  It was obtained by
downloading the file ASCIIMathML.js from
	http://www1.chapman.edu/~jipsen/mathml/asciimathdownload/
and modifying it so that it carries out ONLY those conversions
that would be carried out in LaTeX.  A description of the original
file, with examples, can be found at
	www1.chapman.edu/~jipsen/mathml/asciimath.html
	ASCIIMathML: Math on the web for everyone

Here is the header notice from the original file:

ASCIIMathML.js
==============
This file contains JavaScript functions to convert ASCII math notation
to Presentation MathML. The conversion is done while the (X)HTML page
loads, and should work with Firefox/Mozilla/Netscape 7+ and Internet
Explorer 6+MathPlayer (http://www.dessci.com/en/products/mathplayer/).
Just add the next line to your (X)HTML page with this file in the same folder:
This is a convenient and inexpensive solution for authoring MathML.

Version 1.4.7 Dec 15, 2005, (c) Peter Jipsen http://www.chapman.edu/~jipsen
Latest version at http://www.chapman.edu/~jipsen/mathml/ASCIIMathML.js
For changes see http://www.chapman.edu/~jipsen/mathml/asciimathchanges.txt
If you use it on a webpage, please send the URL to jipsen@chapman.edu

This program is free software; you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation; either version 2 of the License, or (at
your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU
General Public License (at http://www.gnu.org/copyleft/gpl.html)
for more details.

LaTeXMathML.js (ctd)
==============

The instructions for use are the same as for the original
ASCIIMathML.js, except that of course the line you add to your
file should be
Or use absolute path names if the file is not in the same folder
as your (X)HTML page.
*/

var checkForMathML = true;   // check if browser can display MathML
var notifyIfNoMathML = true; // display note if no MathML capability
var alertIfNoMathML = false;  // show alert box if no MathML capability
// was "red":
var mathcolor = "";	     // change it to "" (to inherit) or any other color
// was "serif":
var mathfontfamily = "";      // change to "" to inherit (works in IE)
                              // or another family (e.g. "arial")
var showasciiformulaonhover = true; // helps students learn ASCIIMath
/*
// Commented out by DRW -- not now used -- see DELIMITERS (twice) near the end
var displaystyle = false;     // puts limits above and below large operators
var decimalsign = ".";        // change to "," if you like, beware of `(1,2)`!
var AMdelimiter1 = "`", AMescape1 = "\\\\`"; // can use other characters
var AMdelimiter2 = "$", AMescape2 = "\\\\\\$", AMdelimiter2regexp = "\\$";
var doubleblankmathdelimiter = false; // if true,  x+1  is equal to `x+1`
                                      // for IE this works only in <!--   -->
//var separatetokens;// has been removed (email me if this is a problem)
*/
var isIE = document.createElementNS==null;

if (document.getElementById==null)
  alert("This webpage requires a recent browser such as\
\nMozilla/Netscape 7+ or Internet Explorer 6+MathPlayer")

// all further global variables start with "AM"

function AMcreateElementXHTML(t) {
  if (isIE) return document.createElement(t);
  else return document.createElementNS("http://www.w3.org/1999/xhtml",t);
}

function AMnoMathMLNote() {
  var nd = AMcreateElementXHTML("h3");
  nd.setAttribute("align","center")
  nd.appendChild(AMcreateElementXHTML("p"));
  nd.appendChild(document.createTextNode("To view the "));
  var an = AMcreateElementXHTML("a");
  an.appendChild(document.createTextNode("LaTeXMathML"));
  an.setAttribute("href","http://www.maths.nott.ac.uk/personal/drw/lm.html");
  nd.appendChild(an);
  nd.appendChild(document.createTextNode(" notation use Internet Explorer 6+"));
  an = AMcreateElementXHTML("a");
  an.appendChild(document.createTextNode("MathPlayer"));
  an.setAttribute("href","http://www.dessci.com/en/products/mathplayer/download.htm");
  nd.appendChild(an);
  nd.appendChild(document.createTextNode(" or Netscape/Mozilla/Firefox"));
  nd.appendChild(AMcreateElementXHTML("p"));
  return nd;
}

function AMisMathMLavailable() {
  if (navigator.appName.slice(0,8)=="Netscape")
    if (navigator.appVersion.slice(0,1)>="5") return null;
    else return AMnoMathMLNote();
  else if (navigator.appName.slice(0,9)=="Microsoft")
    try {
        var ActiveX = new ActiveXObject("MathPlayer.Factory.1");
        return null;
    } catch (e) {
        return AMnoMathMLNote();
    }
  else return AMnoMathMLNote();
}

// character lists for Mozilla/Netscape fonts
var AMcal = [0xEF35,0x212C,0xEF36,0xEF37,0x2130,0x2131,0xEF38,0x210B,0x2110,0xEF39,0xEF3A,0x2112,0x2133,0xEF3B,0xEF3C,0xEF3D,0xEF3E,0x211B,0xEF3F,0xEF40,0xEF41,0xEF42,0xEF43,0xEF44,0xEF45,0xEF46];
var AMfrk = [0xEF5D,0xEF5E,0x212D,0xEF5F,0xEF60,0xEF61,0xEF62,0x210C,0x2111,0xEF63,0xEF64,0xEF65,0xEF66,0xEF67,0xEF68,0xEF69,0xEF6A,0x211C,0xEF6B,0xEF6C,0xEF6D,0xEF6E,0xEF6F,0xEF70,0xEF71,0x2128];
var AMbbb = [0xEF8C,0xEF8D,0x2102,0xEF8E,0xEF8F,0xEF90,0xEF91,0x210D,0xEF92,0xEF93,0xEF94,0xEF95,0xEF96,0x2115,0xEF97,0x2119,0x211A,0x211D,0xEF98,0xEF99,0xEF9A,0xEF9B,0xEF9C,0xEF9D,0xEF9E,0x2124];

var CONST = 0, UNARY = 1, BINARY = 2, INFIX = 3, LEFTBRACKET = 4,
    RIGHTBRACKET = 5, SPACE = 6, UNDEROVER = 7, DEFINITION = 8,
    TEXT = 9, BIG = 10, LONG = 11, STRETCHY = 12, MATRIX = 13; // token types

var AMsqrt = {input:"\\sqrt",	tag:"msqrt", output:"sqrt",	ttype:UNARY},
  AMroot = {input:"\\root",	tag:"mroot", output:"root",	ttype:BINARY},
  AMfrac = {input:"\\frac",	tag:"mfrac", output:"/",	ttype:BINARY},
  AMover = {input:"\\stackrel", tag:"mover", output:"stackrel", ttype:BINARY},
  AMatop = {input:"\\atop",	tag:"mfrac", output:"",		ttype:INFIX},
  AMchoose = {input:"\\choose", tag:"mfrac", output:"",		ttype:INFIX},
  AMsub  = {input:"_",		tag:"msub",  output:"_",	ttype:INFIX},
  AMsup  = {input:"^",		tag:"msup",  output:"^",	ttype:INFIX},
  AMtext = {input:"\\mathrm",	tag:"mtext", output:"text",	ttype:TEXT},
  AMmbox = {input:"\\mbox",	tag:"mtext", output:"mbox",	ttype:TEXT};

// Commented out by DRW to prevent 1/2 turning into a 2-line fraction
// AMdiv   = {input:"/",	 tag:"mfrac", output:"/",    ttype:INFIX},
// Commented out by DRW so that " prints literally in equations
// AMquote = {input:"\"",	 tag:"mtext", output:"mbox", ttype:TEXT};

var AMsymbols = [
//Greek letters
{input:"\\alpha",	tag:"mi", output:"\u03B1", ttype:CONST},
{input:"\\beta",	tag:"mi", output:"\u03B2", ttype:CONST},
{input:"\\gamma",	tag:"mi", output:"\u03B3", ttype:CONST},
{input:"\\delta",	tag:"mi", output:"\u03B4", ttype:CONST},
{input:"\\epsilon",	tag:"mi", output:"\u03B5", ttype:CONST},
{input:"\\varepsilon",  tag:"mi", output:"\u025B", ttype:CONST},
{input:"\\zeta",	tag:"mi", output:"\u03B6", ttype:CONST},
{input:"\\eta",		tag:"mi", output:"\u03B7", ttype:CONST},
{input:"\\theta",	tag:"mi", output:"\u03B8", ttype:CONST},
{input:"\\vartheta",	tag:"mi", output:"\u03D1", ttype:CONST},
{input:"\\iota",	tag:"mi", output:"\u03B9", ttype:CONST},
{input:"\\kappa",	tag:"mi", output:"\u03BA", ttype:CONST},
{input:"\\lambda",	tag:"mi", output:"\u03BB", ttype:CONST},
{input:"\\mu",		tag:"mi", output:"\u03BC", ttype:CONST},
{input:"\\nu",		tag:"mi", output:"\u03BD", ttype:CONST},
{input:"\\xi",		tag:"mi", output:"\u03BE", ttype:CONST},
{input:"\\pi",		tag:"mi", output:"\u03C0", ttype:CONST},
{input:"\\varpi",	tag:"mi", output:"\u03D6", ttype:CONST},
{input:"\\rho",		tag:"mi", output:"\u03C1", ttype:CONST},
{input:"\\varrho",	tag:"mi", output:"\u03F1", ttype:CONST},
{input:"\\varsigma",	tag:"mi", output:"\u03C2", ttype:CONST},
{input:"\\sigma",	tag:"mi", output:"\u03C3", ttype:CONST},
{input:"\\tau",		tag:"mi", output:"\u03C4", ttype:CONST},
{input:"\\upsilon",	tag:"mi", output:"\u03C5", ttype:CONST},
{input:"\\phi",		tag:"mi", output:"\u03C6", ttype:CONST},
{input:"\\varphi",	tag:"mi", output:"\u03D5", ttype:CONST},
{input:"\\chi",		tag:"mi", output:"\u03C7", ttype:CONST},
{input:"\\psi",		tag:"mi", output:"\u03C8", ttype:CONST},
{input:"\\omega",	tag:"mi", output:"\u03C9", ttype:CONST},
{input:"\\Gamma",	tag:"mo", output:"\u0393", ttype:CONST},
{input:"\\Delta",	tag:"mo", output:"\u0394", ttype:CONST},
{input:"\\Theta",	tag:"mo", output:"\u0398", ttype:CONST},
{input:"\\Lambda",	tag:"mo", output:"\u039B", ttype:CONST},
{input:"\\Xi",		tag:"mo", output:"\u039E", ttype:CONST},
{input:"\\Pi",		tag:"mo", output:"\u03A0", ttype:CONST},
{input:"\\Sigma",	tag:"mo", output:"\u03A3", ttype:CONST},
{input:"\\Upsilon",	tag:"mo", output:"\u03A5", ttype:CONST},
{input:"\\Phi",		tag:"mo", output:"\u03A6", ttype:CONST},
{input:"\\Psi",		tag:"mo", output:"\u03A8", ttype:CONST},
{input:"\\Omega",	tag:"mo", output:"\u03A9", ttype:CONST},

//fractions
{input:"\\frac12",	tag:"mo", output:"\u00BD", ttype:CONST},
{input:"\\frac14",	tag:"mo", output:"\u00BC", ttype:CONST},
{input:"\\frac34",	tag:"mo", output:"\u00BE", ttype:CONST},
{input:"\\frac13",	tag:"mo", output:"\u2153", ttype:CONST},
{input:"\\frac23",	tag:"mo", output:"\u2154", ttype:CONST},
{input:"\\frac15",	tag:"mo", output:"\u2155", ttype:CONST},
{input:"\\frac25",	tag:"mo", output:"\u2156", ttype:CONST},
{input:"\\frac35",	tag:"mo", output:"\u2157", ttype:CONST},
{input:"\\frac45",	tag:"mo", output:"\u2158", ttype:CONST},
{input:"\\frac16",	tag:"mo", output:"\u2159", ttype:CONST},
{input:"\\frac56",	tag:"mo", output:"\u215A", ttype:CONST},
{input:"\\frac18",	tag:"mo", output:"\u215B", ttype:CONST},
{input:"\\frac38",	tag:"mo", output:"\u215C", ttype:CONST},
{input:"\\frac58",	tag:"mo", output:"\u215D", ttype:CONST},
{input:"\\frac78",	tag:"mo", output:"\u215E", ttype:CONST},

//binary operation symbols
{input:"\\pm",		tag:"mo", output:"\u00B1", ttype:CONST},
{input:"\\mp",		tag:"mo", output:"\u2213", ttype:CONST},
{input:"\\triangleleft",tag:"mo", output:"\u22B2", ttype:CONST},
{input:"\\triangleright",tag:"mo",output:"\u22B3", ttype:CONST},
{input:"\\cdot",	tag:"mo", output:"\u22C5", ttype:CONST},
{input:"\\star",	tag:"mo", output:"\u22C6", ttype:CONST},
{input:"\\ast",		tag:"mo", output:"\u002A", ttype:CONST},
{input:"\\times",	tag:"mo", output:"\u00D7", ttype:CONST},
{input:"\\div",		tag:"mo", output:"\u00F7", ttype:CONST},
{input:"\\circ",	tag:"mo", output:"\u2218", ttype:CONST},
//{input:"\\bullet",	  tag:"mo", output:"\u2219", ttype:CONST},
{input:"\\bullet",	tag:"mo", output:"\u2022", ttype:CONST},
{input:"\\oplus",	tag:"mo", output:"\u2295", ttype:CONST},
{input:"\\ominus",	tag:"mo", output:"\u2296", ttype:CONST},
{input:"\\otimes",	tag:"mo", output:"\u2297", ttype:CONST},
{input:"\\bigcirc",	tag:"mo", output:"\u25CB", ttype:CONST},
{input:"\\oslash",	tag:"mo", output:"\u2298", ttype:CONST},
{input:"\\odot",	tag:"mo", output:"\u2299", ttype:CONST},
{input:"\\land",	tag:"mo", output:"\u2227", ttype:CONST},
{input:"\\wedge",	tag:"mo", output:"\u2227", ttype:CONST},
{input:"\\lor",		tag:"mo", output:"\u2228", ttype:CONST},
{input:"\\vee",		tag:"mo", output:"\u2228", ttype:CONST},
{input:"\\cap",		tag:"mo", output:"\u2229", ttype:CONST},
{input:"\\cup",		tag:"mo", output:"\u222A", ttype:CONST},
{input:"\\sqcap",	tag:"mo", output:"\u2293", ttype:CONST},
{input:"\\sqcup",	tag:"mo", output:"\u2294", ttype:CONST},
{input:"\\uplus",	tag:"mo", output:"\u228E", ttype:CONST},
{input:"\\amalg",	tag:"mo", output:"\u2210", ttype:CONST},
{input:"\\bigtriangleup",tag:"mo",output:"\u25B3", ttype:CONST},
{input:"\\bigtriangledown",tag:"mo",output:"\u25BD", ttype:CONST},
{input:"\\dag",		tag:"mo", output:"\u2020", ttype:CONST},
{input:"\\dagger",	tag:"mo", output:"\u2020", ttype:CONST},
{input:"\\ddag",	tag:"mo", output:"\u2021", ttype:CONST},
{input:"\\ddagger",	tag:"mo", output:"\u2021", ttype:CONST},
{input:"\\lhd",		tag:"mo", output:"\u22B2", ttype:CONST},
{input:"\\rhd",		tag:"mo", output:"\u22B3", ttype:CONST},
{input:"\\unlhd",	tag:"mo", output:"\u22B4", ttype:CONST},
{input:"\\unrhd",	tag:"mo", output:"\u22B5", ttype:CONST},


//BIG Operators
{input:"\\sum",		tag:"mo", output:"\u2211", ttype:UNDEROVER},
{input:"\\prod",	tag:"mo", output:"\u220F", ttype:UNDEROVER},
{input:"\\bigcap",	tag:"mo", output:"\u22C2", ttype:UNDEROVER},
{input:"\\bigcup",	tag:"mo", output:"\u22C3", ttype:UNDEROVER},
{input:"\\bigwedge",	tag:"mo", output:"\u22C0", ttype:UNDEROVER},
{input:"\\bigvee",	tag:"mo", output:"\u22C1", ttype:UNDEROVER},
{input:"\\bigsqcap",	tag:"mo", output:"\u2A05", ttype:UNDEROVER},
{input:"\\bigsqcup",	tag:"mo", output:"\u2A06", ttype:UNDEROVER},
{input:"\\coprod",	tag:"mo", output:"\u2210", ttype:UNDEROVER},
{input:"\\bigoplus",	tag:"mo", output:"\u2A01", ttype:UNDEROVER},
{input:"\\bigotimes",	tag:"mo", output:"\u2A02", ttype:UNDEROVER},
{input:"\\bigodot",	tag:"mo", output:"\u2A00", ttype:UNDEROVER},
{input:"\\biguplus",	tag:"mo", output:"\u2A04", ttype:UNDEROVER},
{input:"\\int",		tag:"mo", output:"\u222B", ttype:CONST},
{input:"\\oint",	tag:"mo", output:"\u222E", ttype:CONST},

//binary relation symbols
{input:":=",		tag:"mo", output:":=",	   ttype:CONST},
{input:"\\lt",		tag:"mo", output:"<",	   ttype:CONST},
{input:"\\gt",		tag:"mo", output:">",	   ttype:CONST},
{input:"\\ne",		tag:"mo", output:"\u2260", ttype:CONST},
{input:"\\neq",		tag:"mo", output:"\u2260", ttype:CONST},
{input:"\\le",		tag:"mo", output:"\u2264", ttype:CONST},
{input:"\\leq",		tag:"mo", output:"\u2264", ttype:CONST},
{input:"\\leqslant",	tag:"mo", output:"\u2264", ttype:CONST},
{input:"\\ge",		tag:"mo", output:"\u2265", ttype:CONST},
{input:"\\geq",		tag:"mo", output:"\u2265", ttype:CONST},
{input:"\\geqslant",	tag:"mo", output:"\u2265", ttype:CONST},
{input:"\\equiv",	tag:"mo", output:"\u2261", ttype:CONST},
{input:"\\ll",		tag:"mo", output:"\u226A", ttype:CONST},
{input:"\\gg",		tag:"mo", output:"\u226B", ttype:CONST},
{input:"\\doteq",	tag:"mo", output:"\u2250", ttype:CONST},
{input:"\\prec",	tag:"mo", output:"\u227A", ttype:CONST},
{input:"\\succ",	tag:"mo", output:"\u227B", ttype:CONST},
{input:"\\preceq",	tag:"mo", output:"\u227C", ttype:CONST},
{input:"\\succeq",	tag:"mo", output:"\u227D", ttype:CONST},
{input:"\\subset",	tag:"mo", output:"\u2282", ttype:CONST},
{input:"\\supset",	tag:"mo", output:"\u2283", ttype:CONST},
{input:"\\subseteq",	tag:"mo", output:"\u2286", ttype:CONST},
{input:"\\supseteq",	tag:"mo", output:"\u2287", ttype:CONST},
{input:"\\sqsubset",	tag:"mo", output:"\u228F", ttype:CONST},
{input:"\\sqsupset",	tag:"mo", output:"\u2290", ttype:CONST},
{input:"\\sqsubseteq",  tag:"mo", output:"\u2291", ttype:CONST},
{input:"\\sqsupseteq",  tag:"mo", output:"\u2292", ttype:CONST},
{input:"\\sim",		tag:"mo", output:"\u223C", ttype:CONST},
{input:"\\simeq",	tag:"mo", output:"\u2243", ttype:CONST},
{input:"\\approx",	tag:"mo", output:"\u2248", ttype:CONST},
{input:"\\cong",	tag:"mo", output:"\u2245", ttype:CONST},
{input:"\\Join",	tag:"mo", output:"\u22C8", ttype:CONST},
{input:"\\bowtie",	tag:"mo", output:"\u22C8", ttype:CONST},
{input:"\\in",		tag:"mo", output:"\u2208", ttype:CONST},
{input:"\\ni",		tag:"mo", output:"\u220B", ttype:CONST},
{input:"\\owns",	tag:"mo", output:"\u220B", ttype:CONST},
{input:"\\propto",	tag:"mo", output:"\u221D", ttype:CONST},
{input:"\\vdash",	tag:"mo", output:"\u22A2", ttype:CONST},
{input:"\\dashv",	tag:"mo", output:"\u22A3", ttype:CONST},
{input:"\\models",	tag:"mo", output:"\u22A8", ttype:CONST},
{input:"\\perp",	tag:"mo", output:"\u22A5", ttype:CONST},
{input:"\\smile",	tag:"mo", output:"\u2323", ttype:CONST},
{input:"\\frown",	tag:"mo", output:"\u2322", ttype:CONST},
{input:"\\asymp",	tag:"mo", output:"\u224D", ttype:CONST},
{input:"\\notin",	tag:"mo", output:"\u2209", ttype:CONST},

//matrices
{input:"\\begin{eqnarray}",	output:"X",	ttype:MATRIX, invisible:true},
{input:"\\begin{array}",	output:"X",	ttype:MATRIX, invisible:true},
{input:"\\\\",			output:"}&{",	ttype:DEFINITION},
{input:"\\end{eqnarray}",	output:"}}",	ttype:DEFINITION},
{input:"\\end{array}",		output:"}}",	ttype:DEFINITION},

//grouping and literal brackets -- ieval is for IE
{input:"\\big",	   tag:"mo", output:"X", atval:"1.2", ieval:"2.2", ttype:BIG},
{input:"\\Big",	   tag:"mo", output:"X", atval:"1.6", ieval:"2.6", ttype:BIG},
{input:"\\bigg",   tag:"mo", output:"X", atval:"2.2", ieval:"3.2", ttype:BIG},
{input:"\\Bigg",   tag:"mo", output:"X", atval:"2.9", ieval:"3.9", ttype:BIG},
{input:"\\left",   tag:"mo", output:"X", ttype:LEFTBRACKET},
{input:"\\right",  tag:"mo", output:"X", ttype:RIGHTBRACKET},
{input:"{",	   output:"{", ttype:LEFTBRACKET,  invisible:true},
{input:"}",	   output:"}", ttype:RIGHTBRACKET, invisible:true},

{input:"(",	   tag:"mo", output:"(",      atval:"1", ttype:STRETCHY},
{input:"[",	   tag:"mo", output:"[",      atval:"1", ttype:STRETCHY},
{input:"\\lbrack", tag:"mo", output:"[",      atval:"1", ttype:STRETCHY},
{input:"\\{",	   tag:"mo", output:"{",      atval:"1", ttype:STRETCHY},
{input:"\\lbrace", tag:"mo", output:"{",      atval:"1", ttype:STRETCHY},
{input:"\\langle", tag:"mo", output:"\u2329", atval:"1", ttype:STRETCHY},
{input:"\\lfloor", tag:"mo", output:"\u230A", atval:"1", ttype:STRETCHY},
{input:"\\lceil",  tag:"mo", output:"\u2308", atval:"1", ttype:STRETCHY},

// rtag:"mi" causes space to be inserted before a following sin, cos, etc.
// (see function AMparseExpr() )
{input:")",	  tag:"mo",output:")",	    rtag:"mi",atval:"1",ttype:STRETCHY},
{input:"]",	  tag:"mo",output:"]",	    rtag:"mi",atval:"1",ttype:STRETCHY},
{input:"\\rbrack",tag:"mo",output:"]",	    rtag:"mi",atval:"1",ttype:STRETCHY},
{input:"\\}",	  tag:"mo",output:"}",	    rtag:"mi",atval:"1",ttype:STRETCHY},
{input:"\\rbrace",tag:"mo",output:"}",	    rtag:"mi",atval:"1",ttype:STRETCHY},
{input:"\\rangle",tag:"mo",output:"\u232A", rtag:"mi",atval:"1",ttype:STRETCHY},
{input:"\\rfloor",tag:"mo",output:"\u230B", rtag:"mi",atval:"1",ttype:STRETCHY},
{input:"\\rceil", tag:"mo",output:"\u2309", rtag:"mi",atval:"1",ttype:STRETCHY},

// "|", "\\|", "\\vert" and "\\Vert" modified later: lspace = rspace = 0em
{input:"|",		tag:"mo", output:"\u2223", atval:"1", ttype:STRETCHY},
{input:"\\|",		tag:"mo", output:"\u2225", atval:"1", ttype:STRETCHY},
{input:"\\vert",	tag:"mo", output:"\u2223", atval:"1", ttype:STRETCHY},
{input:"\\Vert",	tag:"mo", output:"\u2225", atval:"1", ttype:STRETCHY},
{input:"\\mid",		tag:"mo", output:"\u2223", atval:"1", ttype:STRETCHY},
{input:"\\parallel",	tag:"mo", output:"\u2225", atval:"1", ttype:STRETCHY},
{input:"/",		tag:"mo", output:"/",	atval:"1.01", ttype:STRETCHY},
{input:"\\backslash",	tag:"mo", output:"\u2216", atval:"1", ttype:STRETCHY},
{input:"\\setminus",	tag:"mo", output:"\\",	   ttype:CONST},

//miscellaneous symbols
{input:"\\!",	  tag:"mspace", atname:"width", atval:"-0.167em", ttype:SPACE},
{input:"\\,",	  tag:"mspace", atname:"width", atval:"0.167em", ttype:SPACE},
{input:"\\>",	  tag:"mspace", atname:"width", atval:"0.222em", ttype:SPACE},
{input:"\\:",	  tag:"mspace", atname:"width", atval:"0.222em", ttype:SPACE},
{input:"\\;",	  tag:"mspace", atname:"width", atval:"0.278em", ttype:SPACE},
{input:"~",	  tag:"mspace", atname:"width", atval:"0.333em", ttype:SPACE},
{input:"\\quad",  tag:"mspace", atname:"width", atval:"1em", ttype:SPACE},
{input:"\\qquad", tag:"mspace", atname:"width", atval:"2em", ttype:SPACE},
//{input:"{}",		  tag:"mo", output:"\u200B", ttype:CONST}, // zero-width
{input:"\\prime",	tag:"mo", output:"\u2032", ttype:CONST},
{input:"'",		tag:"mo", output:"\u02B9", ttype:CONST},
{input:"''",		tag:"mo", output:"\u02BA", ttype:CONST},
{input:"'''",		tag:"mo", output:"\u2034", ttype:CONST},
{input:"''''",		tag:"mo", output:"\u2057", ttype:CONST},
{input:"\\ldots",	tag:"mo", output:"\u2026", ttype:CONST},
{input:"\\cdots",	tag:"mo", output:"\u22EF", ttype:CONST},
{input:"\\vdots",	tag:"mo", output:"\u22EE", ttype:CONST},
{input:"\\ddots",	tag:"mo", output:"\u22F1", ttype:CONST},
{input:"\\forall",	tag:"mo", output:"\u2200", ttype:CONST},
{input:"\\exists",	tag:"mo", output:"\u2203", ttype:CONST},
{input:"\\Re",		tag:"mo", output:"\u211C", ttype:CONST},
{input:"\\Im",		tag:"mo", output:"\u2111", ttype:CONST},
{input:"\\aleph",	tag:"mo", output:"\u2135", ttype:CONST},
{input:"\\hbar",	tag:"mo", output:"\u210F", ttype:CONST},
{input:"\\ell",		tag:"mo", output:"\u2113", ttype:CONST},
{input:"\\wp",		tag:"mo", output:"\u2118", ttype:CONST},
{input:"\\emptyset",	tag:"mo", output:"\u2205", ttype:CONST},
{input:"\\infty",	tag:"mo", output:"\u221E", ttype:CONST},
{input:"\\surd",	tag:"mo", output:"\\sqrt{}", ttype:DEFINITION},
{input:"\\partial",	tag:"mo", output:"\u2202", ttype:CONST},
{input:"\\nabla",	tag:"mo", output:"\u2207", ttype:CONST},
{input:"\\triangle",	tag:"mo", output:"\u25B3", ttype:CONST},
{input:"\\therefore",	tag:"mo", output:"\u2234", ttype:CONST},
{input:"\\angle",	tag:"mo", output:"\u2220", ttype:CONST},
//{input:"\\\\ ",	  tag:"mo", output:"\u00A0", ttype:CONST},
{input:"\\diamond",	tag:"mo", output:"\u22C4", ttype:CONST},
//{input:"\\Diamond",	  tag:"mo", output:"\u25CA", ttype:CONST},
{input:"\\Diamond",	tag:"mo", output:"\u25C7", ttype:CONST},
{input:"\\neg",		tag:"mo", output:"\u00AC", ttype:CONST},
{input:"\\lnot",	tag:"mo", output:"\u00AC", ttype:CONST},
{input:"\\bot",		tag:"mo", output:"\u22A5", ttype:CONST},
{input:"\\top",		tag:"mo", output:"\u22A4", ttype:CONST},
{input:"\\square",	tag:"mo", output:"\u25AB", ttype:CONST},
{input:"\\Box",		tag:"mo", output:"\u25A1", ttype:CONST},
{input:"\\wr",		tag:"mo", output:"\u2240", ttype:CONST},

//standard functions
//Note UNDEROVER *must* have tag:"mo" to work properly
{input:"\\arccos", tag:"mi", output:"arccos", ttype:UNARY, func:true},
{input:"\\arcsin", tag:"mi", output:"arcsin", ttype:UNARY, func:true},
{input:"\\arctan", tag:"mi", output:"arctan", ttype:UNARY, func:true},
{input:"\\arg",	   tag:"mi", output:"arg",    ttype:UNARY, func:true},
{input:"\\cos",	   tag:"mi", output:"cos",    ttype:UNARY, func:true},
{input:"\\cosh",   tag:"mi", output:"cosh",   ttype:UNARY, func:true},
{input:"\\cot",	   tag:"mi", output:"cot",    ttype:UNARY, func:true},
{input:"\\coth",   tag:"mi", output:"coth",   ttype:UNARY, func:true},
{input:"\\csc",	   tag:"mi", output:"csc",    ttype:UNARY, func:true},
{input:"\\deg",	   tag:"mi", output:"deg",    ttype:UNARY, func:true},
{input:"\\det",	   tag:"mi", output:"det",    ttype:UNARY, func:true},
{input:"\\dim",	   tag:"mi", output:"dim",    ttype:UNARY, func:true}, //CONST?
{input:"\\exp",	   tag:"mi", output:"exp",    ttype:UNARY, func:true},
{input:"\\gcd",	   tag:"mi", output:"gcd",    ttype:UNARY, func:true}, //CONST?
{input:"\\hom",	   tag:"mi", output:"hom",    ttype:UNARY, func:true},
{input:"\\inf",	      tag:"mo", output:"inf",	 ttype:UNDEROVER},
{input:"\\ker",	   tag:"mi", output:"ker",    ttype:UNARY, func:true},
{input:"\\lg",	   tag:"mi", output:"lg",     ttype:UNARY, func:true},
{input:"\\lim",	      tag:"mo", output:"lim",	 ttype:UNDEROVER},
{input:"\\liminf",    tag:"mo", output:"liminf", ttype:UNDEROVER},
{input:"\\limsup",    tag:"mo", output:"limsup", ttype:UNDEROVER},
{input:"\\ln",	   tag:"mi", output:"ln",     ttype:UNARY, func:true},
{input:"\\log",	   tag:"mi", output:"log",    ttype:UNARY, func:true},
{input:"\\max",	      tag:"mo", output:"max",	 ttype:UNDEROVER},
{input:"\\min",	      tag:"mo", output:"min",	 ttype:UNDEROVER},
{input:"\\Pr",	   tag:"mi", output:"Pr",     ttype:UNARY, func:true},
{input:"\\sec",	   tag:"mi", output:"sec",    ttype:UNARY, func:true},
{input:"\\sin",	   tag:"mi", output:"sin",    ttype:UNARY, func:true},
{input:"\\sinh",   tag:"mi", output:"sinh",   ttype:UNARY, func:true},
{input:"\\sup",	      tag:"mo", output:"sup",	 ttype:UNDEROVER},
{input:"\\tan",	   tag:"mi", output:"tan",    ttype:UNARY, func:true},
{input:"\\tanh",   tag:"mi", output:"tanh",   ttype:UNARY, func:true},

//arrows
{input:"\\gets",		tag:"mo", output:"\u2190", ttype:CONST},
{input:"\\leftarrow",		tag:"mo", output:"\u2190", ttype:CONST},
{input:"\\to",			tag:"mo", output:"\u2192", ttype:CONST},
{input:"\\rightarrow",		tag:"mo", output:"\u2192", ttype:CONST},
{input:"\\leftrightarrow",	tag:"mo", output:"\u2194", ttype:CONST},
{input:"\\uparrow",		tag:"mo", output:"\u2191", ttype:CONST},
{input:"\\downarrow",		tag:"mo", output:"\u2193", ttype:CONST},
{input:"\\updownarrow",		tag:"mo", output:"\u2195", ttype:CONST},
{input:"\\Leftarrow",		tag:"mo", output:"\u21D0", ttype:CONST},
{input:"\\Rightarrow",		tag:"mo", output:"\u21D2", ttype:CONST},
{input:"\\Leftrightarrow",	tag:"mo", output:"\u21D4", ttype:CONST},
{input:"\\iff", tag:"mo", output:"~\\Longleftrightarrow~", ttype:DEFINITION},
{input:"\\Uparrow",		tag:"mo", output:"\u21D1", ttype:CONST},
{input:"\\Downarrow",		tag:"mo", output:"\u21D3", ttype:CONST},
{input:"\\Updownarrow",		tag:"mo", output:"\u21D5", ttype:CONST},
{input:"\\mapsto",		tag:"mo", output:"\u21A6", ttype:CONST},
{input:"\\longleftarrow",	tag:"mo", output:"\u2190", ttype:LONG},
{input:"\\longrightarrow",	tag:"mo", output:"\u2192", ttype:LONG},
{input:"\\longleftrightarrow",	tag:"mo", output:"\u2194", ttype:LONG},
{input:"\\Longleftarrow",	tag:"mo", output:"\u21D0", ttype:LONG},
{input:"\\Longrightarrow",	tag:"mo", output:"\u21D2", ttype:LONG},
{input:"\\Longleftrightarrow",  tag:"mo", output:"\u21D4", ttype:LONG},
{input:"\\longmapsto",		tag:"mo", output:"\u21A6", ttype:CONST},
							// disaster if LONG

//commands with argument
AMsqrt, AMroot, AMfrac, AMover, AMsub, AMsup, AMtext, AMmbox, AMatop, AMchoose,
//AMdiv, AMquote,

//diacritical marks
{input:"\\acute",	tag:"mover",  output:"\u00B4", ttype:UNARY, acc:true},
//{input:"\\acute",	  tag:"mover",  output:"\u0317", ttype:UNARY, acc:true},
//{input:"\\acute",	  tag:"mover",  output:"\u0301", ttype:UNARY, acc:true},
//{input:"\\grave",	  tag:"mover",  output:"\u0300", ttype:UNARY, acc:true},
//{input:"\\grave",	  tag:"mover",  output:"\u0316", ttype:UNARY, acc:true},
{input:"\\grave",	tag:"mover",  output:"\u0060", ttype:UNARY, acc:true},
{input:"\\breve",	tag:"mover",  output:"\u02D8", ttype:UNARY, acc:true},
{input:"\\check",	tag:"mover",  output:"\u02C7", ttype:UNARY, acc:true},
{input:"\\dot",		tag:"mover",  output:".",      ttype:UNARY, acc:true},
{input:"\\ddot",	tag:"mover",  output:"..",     ttype:UNARY, acc:true},
//{input:"\\ddot",	  tag:"mover",  output:"\u00A8", ttype:UNARY, acc:true},
{input:"\\mathring",	tag:"mover",  output:"\u00B0", ttype:UNARY, acc:true},
{input:"\\vec",		tag:"mover",  output:"\u20D7", ttype:UNARY, acc:true},
{input:"\\overrightarrow",tag:"mover",output:"\u20D7", ttype:UNARY, acc:true},
{input:"\\overleftarrow",tag:"mover", output:"\u20D6", ttype:UNARY, acc:true},
{input:"\\hat",		tag:"mover",  output:"\u005E", ttype:UNARY, acc:true},
{input:"\\widehat",	tag:"mover",  output:"\u0302", ttype:UNARY, acc:true},
{input:"\\tilde",	tag:"mover",  output:"~",      ttype:UNARY, acc:true},
//{input:"\\tilde",	  tag:"mover",  output:"\u0303", ttype:UNARY, acc:true},
{input:"\\widetilde",	tag:"mover",  output:"\u02DC", ttype:UNARY, acc:true},
{input:"\\bar",		tag:"mover",  output:"\u203E", ttype:UNARY, acc:true},
{input:"\\overbrace",	tag:"mover",  output:"\u23B4", ttype:UNARY, acc:true},
{input:"\\overline",	tag:"mover",  output:"\u00AF", ttype:UNARY, acc:true},
{input:"\\underbrace",  tag:"munder", output:"\u23B5", ttype:UNARY, acc:true},
{input:"\\underline",	tag:"munder", output:"\u00AF", ttype:UNARY, acc:true},
//{input:"underline",	tag:"munder", output:"\u0332", ttype:UNARY, acc:true},

//typestyles and fonts
{input:"\\displaystyle",tag:"mstyle",atname:"displaystyle",atval:"true", ttype:UNARY},
{input:"\\textstyle",tag:"mstyle",atname:"displaystyle",atval:"false", ttype:UNARY},
{input:"\\scriptstyle",tag:"mstyle",atname:"scriptlevel",atval:"1", ttype:UNARY},
{input:"\\scriptscriptstyle",tag:"mstyle",atname:"scriptlevel",atval:"2", ttype:UNARY},
{input:"\\textrm", tag:"mstyle", output:"\\mathrm", ttype: DEFINITION},
{input:"\\mathbf", tag:"mstyle", atname:"mathvariant", atval:"bold", ttype:UNARY},
{input:"\\textbf", tag:"mstyle", atname:"mathvariant", atval:"bold", ttype:UNARY},
{input:"\\mathit", tag:"mstyle", atname:"mathvariant", atval:"italic", ttype:UNARY},
{input:"\\textit", tag:"mstyle", atname:"mathvariant", atval:"italic", ttype:UNARY},
{input:"\\mathtt", tag:"mstyle", atname:"mathvariant", atval:"monospace", ttype:UNARY},
{input:"\\texttt", tag:"mstyle", atname:"mathvariant", atval:"monospace", ttype:UNARY},
{input:"\\mathsf", tag:"mstyle", atname:"mathvariant", atval:"sans-serif", ttype:UNARY},
{input:"\\mathbb", tag:"mstyle", atname:"mathvariant", atval:"double-struck", ttype:UNARY, codes:AMbbb},
{input:"\\mathcal",tag:"mstyle", atname:"mathvariant", atval:"script", ttype:UNARY, codes:AMcal},
{input:"\\mathfrak",tag:"mstyle",atname:"mathvariant", atval:"fraktur",ttype:UNARY, codes:AMfrk}
];

function compareNames(s1,s2) {
  if (s1.input > s2.input) return 1
  else return -1;
}

var AMnames = []; //list of input symbols

function AMinitSymbols() {
  AMsymbols.sort(compareNames);
  for (i=0; i<AMsymbols.length; i++) AMnames[i] = AMsymbols[i].input;
}

var AMmathml = "http://www.w3.org/1998/Math/MathML";

function AMcreateElementMathML(t) {
  if (isIE) return document.createElement("m:"+t);
  else return document.createElementNS(AMmathml,t);
}

function AMcreateMmlNode(t,frag) {
//  var node = AMcreateElementMathML(name);
  if (isIE) var node = document.createElement("m:"+t);
  else var node = document.createElementNS(AMmathml,t);
  node.appendChild(frag);
  return node;
}

function newcommand(oldstr,newstr) {
  AMsymbols = AMsymbols.concat([{input:oldstr, tag:"mo", output:newstr,
                                 ttype:DEFINITION}]);
}

function AMremoveCharsAndBlanks(str,n) {
//remove n characters and any following blanks
  var st;
  st = str.slice(n);
  for (var i=0; i<st.length && st.charCodeAt(i)<=32; i=i+1);
  return st.slice(i);
}

function AMposition(arr, str, n) {
// return position >=n where str appears or would be inserted
// assumes arr is sorted
  if (n==0) {
    var h,m;
    n = -1;
    h = arr.length;
    while (n+1<h) {
      m = (n+h) >> 1;
      if (arr[m]<str) n = m; else h = m;
    }
    return h;
  } else
    for (var i=n; i<arr.length && arr[i]<str; i++);
  return i; // i=arr.length || arr[i]>=str
}

function AMgetSymbol(str) {
//return maximal initial substring of str that appears in names
//return null if there is none
  var k = 0; //new pos
  var j = 0; //old pos
  var mk; //match pos
  var st;
  var tagst;
  var match = "";
  var more = true;
  for (var i=1; i<=str.length && more; i++) {
    st = str.slice(0,i); //initial substring of length i
    j = k;
    k = AMposition(AMnames, st, j);
    if (k<AMnames.length && str.slice(0,AMnames[k].length)==AMnames[k]){
      match = AMnames[k];
      mk = k;
      i = match.length;
    }
    more = k<AMnames.length && str.slice(0,AMnames[k].length)>=AMnames[k];
  }
  AMpreviousSymbol=AMcurrentSymbol;
  if (match!=""){
    AMcurrentSymbol=AMsymbols[mk].ttype;
    return AMsymbols[mk];
  }
  AMcurrentSymbol=CONST;
  k = 1;
  st = str.slice(0,1); //take 1 character
  if ("0"<=st && st<="9") tagst = "mn";
  else tagst = (("A">st || st>"Z") && ("a">st || st>"z")?"mo":"mi");
/*
// Commented out by DRW (not fully understood, but probably to do with
// use of "/" as an INFIX version of "\\frac", which we don't want):
//}
//if (st=="-" && AMpreviousSymbol==INFIX) {
//  AMcurrentSymbol = INFIX;  //trick "/" into recognizing "-" on second parse
//  return {input:st, tag:tagst, output:st, ttype:UNARY, func:true};
//}
*/
  return {input:st, tag:tagst, output:st, ttype:CONST};
}


/*Parsing ASCII math expressions with the following grammar
v ::= [A-Za-z] | greek letters | numbers | other constant symbols
u ::= sqrt | text | bb | other unary symbols for font commands
b ::= frac | root | stackrel	binary symbols
l ::= { | \left			left brackets
r ::= } | \right		right brackets
S ::= v | lEr | uS | bSS	Simple expression
I ::= S_S | S^S | S_S^S | S	Intermediate expression
E ::= IE | I/I			Expression
Each terminal symbol is translated into a corresponding mathml node.*/

var AMpreviousSymbol,AMcurrentSymbol;

function AMparseSexpr(str) { //parses str and returns [node,tailstr,(node)tag]
  var symbol, node, result, result2, i, st,// rightvert = false,
    newFrag = document.createDocumentFragment();
  str = AMremoveCharsAndBlanks(str,0);
  symbol = AMgetSymbol(str);             //either a token or a bracket or empty
  if (symbol == null || symbol.ttype == RIGHTBRACKET)
    return [null,str,null];
  if (symbol.ttype == DEFINITION) {
    str = symbol.output+AMremoveCharsAndBlanks(str,symbol.input.length);
    symbol = AMgetSymbol(str);
    if (symbol == null || symbol.ttype == RIGHTBRACKET)
      return [null,str,null];
  }
  str = AMremoveCharsAndBlanks(str,symbol.input.length);
  switch (symbol.ttype) {
  case SPACE:
    node = AMcreateElementMathML(symbol.tag);
    node.setAttribute(symbol.atname,symbol.atval);
    return [node,str,symbol.tag];
  case UNDEROVER:
    if (isIE) {
      if (symbol.input.substr(0,4) == "\\big") {   // botch for missing symbols
	str = "\\"+symbol.input.substr(4)+str;	   // make \bigcup = \cup etc.
	symbol = AMgetSymbol(str);
	symbol.ttype = UNDEROVER;
	str = AMremoveCharsAndBlanks(str,symbol.input.length);
      }
    }
    return [AMcreateMmlNode(symbol.tag,
			document.createTextNode(symbol.output)),str,symbol.tag];
  case CONST:
    var output = symbol.output;
    if (isIE) {
      if (symbol.input == "'")
	output = "\u2032";
      else if (symbol.input == "''")
	output = "\u2033";
      else if (symbol.input == "'''")
	output = "\u2033\u2032";
      else if (symbol.input == "''''")
	output = "\u2033\u2033";
      else if (symbol.input == "\\square")
	output = "\u25A1";	// same as \Box
      else if (symbol.input.substr(0,5) == "\\frac") {
						// botch for missing fractions
	var denom = symbol.input.substr(6,1);
	if (denom == "5" || denom == "6") {
	  str = symbol.input.replace(/\\frac/,"\\frac ")+str;
	  return [node,str,symbol.tag];
	}
      }
    }
    node = AMcreateMmlNode(symbol.tag,document.createTextNode(output));
    return [node,str,symbol.tag];
  case LONG:  // added by DRW
    node = AMcreateMmlNode(symbol.tag,document.createTextNode(symbol.output));
    node.setAttribute("minsize","1.5");
    node.setAttribute("maxsize","1.5");
    node = AMcreateMmlNode("mover",node);
    node.appendChild(AMcreateElementMathML("mspace"));
    return [node,str,symbol.tag];
  case STRETCHY:  // added by DRW
    if (isIE && symbol.input == "\\backslash")
	symbol.output = "\\";	// doesn't expand, but then nor does "\u2216"
    node = AMcreateMmlNode(symbol.tag,document.createTextNode(symbol.output));
    if (symbol.input == "|" || symbol.input == "\\vert" ||
	symbol.input == "\\|" || symbol.input == "\\Vert") {
	  node.setAttribute("lspace","0em");
	  node.setAttribute("rspace","0em");
    }
    node.setAttribute("maxsize",symbol.atval);  // don't allow to stretch here
    if (symbol.rtag != null)
      return [node,str,symbol.rtag];
    else
      return [node,str,symbol.tag];
  case BIG:  // added by DRW
    var atval = symbol.atval;
    if (isIE)
      atval = symbol.ieval;
    symbol = AMgetSymbol(str);
    if (symbol == null)
	return [null,str,null];
    str = AMremoveCharsAndBlanks(str,symbol.input.length);
    node = AMcreateMmlNode(symbol.tag,document.createTextNode(symbol.output));
    if (isIE) {		// to get brackets to expand
      var space = AMcreateElementMathML("mspace");
      space.setAttribute("height",atval+"ex");
      node = AMcreateMmlNode("mrow",node);
      node.appendChild(space);
    } else {		// ignored in IE
      node.setAttribute("minsize",atval);
      node.setAttribute("maxsize",atval);
    }
    return [node,str,symbol.tag];
  case LEFTBRACKET:   //read (expr+)
    if (symbol.input == "\\left") { // left what?
      symbol = AMgetSymbol(str);
      if (symbol != null) {
	if (symbol.input == ".")
	  symbol.invisible = true;
	str = AMremoveCharsAndBlanks(str,symbol.input.length);
      }
    }
    result = AMparseExpr(str,true,false);
    if (symbol==null ||
	(typeof symbol.invisible == "boolean" && symbol.invisible))
      node = AMcreateMmlNode("mrow",result[0]);
    else {
      node = AMcreateMmlNode("mo",document.createTextNode(symbol.output));
      node = AMcreateMmlNode("mrow",node);
      node.appendChild(result[0]);
    }
    return [node,result[1],result[2]];
  case MATRIX:	 //read (expr+)
    if (symbol.input == "\\begin{array}") {
      var mask = "";
      symbol = AMgetSymbol(str);
      str = AMremoveCharsAndBlanks(str,0);
      if (symbol == null)
	mask = "l";
      else {
	str = AMremoveCharsAndBlanks(str,symbol.input.length);
	if (symbol.input != "{")
	  mask = "l";
	else do {
	  symbol = AMgetSymbol(str);
	  if (symbol != null) {
	    str = AMremoveCharsAndBlanks(str,symbol.input.length);
	    if (symbol.input != "}")
	      mask = mask+symbol.input;
	  }
	} while (symbol != null && symbol.input != "" && symbol.input != "}");
      }
      result = AMparseExpr("{"+str,true,true);
//    if (result[0]==null) return [AMcreateMmlNode("mo",
//			   document.createTextNode(symbol.input)),str];
      node = AMcreateMmlNode("mtable",result[0]);
      mask = mask.replace(/l/g,"left ");
      mask = mask.replace(/r/g,"right ");
      mask = mask.replace(/c/g,"center ");
      node.setAttribute("columnalign",mask);
      node.setAttribute("displaystyle","false");
      if (isIE)
	return [node,result[1],null];
// trying to get a *little* bit of space around the array
// (IE already includes it)
      var lspace = AMcreateElementMathML("mspace");
      lspace.setAttribute("width","0.167em");
      var rspace = AMcreateElementMathML("mspace");
      rspace.setAttribute("width","0.167em");
      var node1 = AMcreateMmlNode("mrow",lspace);
      node1.appendChild(node);
      node1.appendChild(rspace);
      return [node1,result[1],null];
    } else {	// eqnarray
      result = AMparseExpr("{"+str,true,true);
      node = AMcreateMmlNode("mtable",result[0]);
      if (isIE)
	node.setAttribute("columnspacing","0.25em"); // best in practice?
      else
	node.setAttribute("columnspacing","0.167em"); // correct (but ignored?)
      node.setAttribute("columnalign","right center left");
      node.setAttribute("displaystyle","true");
      node = AMcreateMmlNode("mrow",node);
      return [node,result[1],null];
    }
  case TEXT:
      if (str.charAt(0)=="{") i=str.indexOf("}");
      else i = 0;
      if (i==-1)
		 i = str.length;
      st = str.slice(1,i);
      if (st.charAt(0) == " ") {
	node = AMcreateElementMathML("mspace");
	node.setAttribute("width","0.33em");	// was 1ex
	newFrag.appendChild(node);
      }
      newFrag.appendChild(
        AMcreateMmlNode(symbol.tag,document.createTextNode(st)));
      if (st.charAt(st.length-1) == " ") {
	node = AMcreateElementMathML("mspace");
	node.setAttribute("width","0.33em");	// was 1ex
	newFrag.appendChild(node);
      }
      str = AMremoveCharsAndBlanks(str,i+1);
      return [AMcreateMmlNode("mrow",newFrag),str,null];
  case UNARY:
      result = AMparseSexpr(str);
      if (result[0]==null) return [AMcreateMmlNode(symbol.tag,
                             document.createTextNode(symbol.output)),str];
      if (typeof symbol.func == "boolean" && symbol.func) { // functions hack
	st = str.charAt(0);
//	if (st=="^" || st=="_" || st=="/" || st=="|" || st==",") {
	if (st=="^" || st=="_" || st==",") {
	  return [AMcreateMmlNode(symbol.tag,
		    document.createTextNode(symbol.output)),str,symbol.tag];
        } else {
	  node = AMcreateMmlNode("mrow",
	   AMcreateMmlNode(symbol.tag,document.createTextNode(symbol.output)));
	  if (isIE) {
	    var space = AMcreateElementMathML("mspace");
	    space.setAttribute("width","0.167em");
	    node.appendChild(space);
	  }
	  node.appendChild(result[0]);
	  return [node,result[1],symbol.tag];
        }
      }
      if (symbol.input == "\\sqrt") {		// sqrt
	if (isIE) {	// set minsize, for \surd
	  var space = AMcreateElementMathML("mspace");
	  space.setAttribute("height","1.2ex");
	  space.setAttribute("width","0em");	// probably no effect
	  node = AMcreateMmlNode(symbol.tag,result[0])
//	  node.setAttribute("minsize","1");	// ignored
//	  node = AMcreateMmlNode("mrow",node);  // hopefully unnecessary
	  node.appendChild(space);
	  return [node,result[1],symbol.tag];
	} else
	  return [AMcreateMmlNode(symbol.tag,result[0]),result[1],symbol.tag];
      } else if (typeof symbol.acc == "boolean" && symbol.acc) {   // accent
        node = AMcreateMmlNode(symbol.tag,result[0]);
	var output = symbol.output;
	if (isIE) {
		if (symbol.input == "\\hat")
			output = "\u0302";
		else if (symbol.input == "\\widehat")
			output = "\u005E";
		else if (symbol.input == "\\bar")
			output = "\u00AF";
		else if (symbol.input == "\\grave")
			output = "\u0300";
		else if (symbol.input == "\\tilde")
			output = "\u0303";
	}
	var node1 = AMcreateMmlNode("mo",document.createTextNode(output));
	if (symbol.input == "\\vec" || symbol.input == "\\check")
						// don't allow to stretch
	    node1.setAttribute("maxsize","1.2");
		 // why doesn't "1" work?  \vec nearly disappears in firefox
	if (isIE && symbol.input == "\\bar")
	    node1.setAttribute("maxsize","0.5");
	if (symbol.input == "\\underbrace" || symbol.input == "\\underline")
	  node1.setAttribute("accentunder","true");
	else
	  node1.setAttribute("accent","true");
	node.appendChild(node1);
	if (symbol.input == "\\overbrace" || symbol.input == "\\underbrace")
	  node.ttype = UNDEROVER;
	return [node,result[1],symbol.tag];
      } else {			      // font change or displaystyle command
        if (!isIE && typeof symbol.codes != "undefined") {
          for (i=0; i<result[0].childNodes.length; i++)
            if (result[0].childNodes[i].nodeName=="mi" || result[0].nodeName=="mi") {
              st = (result[0].nodeName=="mi"?result[0].firstChild.nodeValue:
                              result[0].childNodes[i].firstChild.nodeValue);
              var newst = [];
              for (var j=0; j<st.length; j++)
                if (st.charCodeAt(j)>64 && st.charCodeAt(j)<91) newst = newst +
                  String.fromCharCode(symbol.codes[st.charCodeAt(j)-65]);
                else newst = newst + st.charAt(j);
              if (result[0].nodeName=="mi")
                result[0]=AMcreateElementMathML("mo").
                          appendChild(document.createTextNode(newst));
              else result[0].replaceChild(AMcreateElementMathML("mo").
          appendChild(document.createTextNode(newst)),result[0].childNodes[i]);
            }
        }
        node = AMcreateMmlNode(symbol.tag,result[0]);
        node.setAttribute(symbol.atname,symbol.atval);
	if (symbol.input == "\\scriptstyle" ||
	    symbol.input == "\\scriptscriptstyle")
		node.setAttribute("displaystyle","false");
	return [node,result[1],symbol.tag];
      }
  case BINARY:
    result = AMparseSexpr(str);
    if (result[0]==null) return [AMcreateMmlNode("mo",
			   document.createTextNode(symbol.input)),str,null];
    result2 = AMparseSexpr(result[1]);
    if (result2[0]==null) return [AMcreateMmlNode("mo",
			   document.createTextNode(symbol.input)),str,null];
    if (symbol.input=="\\root" || symbol.input=="\\stackrel")
      newFrag.appendChild(result2[0]);
    newFrag.appendChild(result[0]);
    if (symbol.input=="\\frac") newFrag.appendChild(result2[0]);
    return [AMcreateMmlNode(symbol.tag,newFrag),result2[1],symbol.tag];
  case INFIX:
    str = AMremoveCharsAndBlanks(str,symbol.input.length);
    return [AMcreateMmlNode("mo",document.createTextNode(symbol.output)),
	str,symbol.tag];
  default:
    return [AMcreateMmlNode(symbol.tag,        //its a constant
	document.createTextNode(symbol.output)),str,symbol.tag];
  }
}

function AMparseIexpr(str) {
  var symbol, sym1, sym2, node, result, tag, underover;
  str = AMremoveCharsAndBlanks(str,0);
  sym1 = AMgetSymbol(str);
  result = AMparseSexpr(str);
  node = result[0];
  str = result[1];
  tag = result[2];
  symbol = AMgetSymbol(str);
  if (symbol.ttype == INFIX) {
    str = AMremoveCharsAndBlanks(str,symbol.input.length);
    result = AMparseSexpr(str);
    if (result[0] == null) // show box in place of missing argument
      result[0] = AMcreateMmlNode("mo",document.createTextNode("\u25A1"));
    str = result[1];
    tag = result[2];
    if (symbol.input == "_" || symbol.input == "^") {
      sym2 = AMgetSymbol(str);
      tag = null;	// no space between x^2 and a following sin, cos, etc.
// This is for \underbrace and \overbrace
      underover = ((sym1.ttype == UNDEROVER) || (node.ttype == UNDEROVER));
//    underover = (sym1.ttype == UNDEROVER);
      if (symbol.input == "_" && sym2.input == "^") {
        str = AMremoveCharsAndBlanks(str,sym2.input.length);
        var res2 = AMparseSexpr(str);
	str = res2[1];
	tag = res2[2];  // leave space between x_1^2 and a following sin etc.
        node = AMcreateMmlNode((underover?"munderover":"msubsup"),node);
        node.appendChild(result[0]);
        node.appendChild(res2[0]);
      } else if (symbol.input == "_") {
	node = AMcreateMmlNode((underover?"munder":"msub"),node);
        node.appendChild(result[0]);
      } else {
	node = AMcreateMmlNode((underover?"mover":"msup"),node);
        node.appendChild(result[0]);
      }
      node = AMcreateMmlNode("mrow",node); // so sum does not stretch
    } else {
      node = AMcreateMmlNode(symbol.tag,node);
      if (symbol.input == "\\atop" || symbol.input == "\\choose")
	node.setAttribute("linethickness","0ex");
      node.appendChild(result[0]);
      if (symbol.input == "\\choose")
	node = AMcreateMmlNode("mfenced",node);
    }
  }
  return [node,str,tag];
}

function AMparseExpr(str,rightbracket,matrix) {
  var symbol, node, result, i, tag,
  newFrag = document.createDocumentFragment();
  do {
    str = AMremoveCharsAndBlanks(str,0);
    result = AMparseIexpr(str);
    node = result[0];
    str = result[1];
    tag = result[2];
    symbol = AMgetSymbol(str);
    if (node!=undefined) {
      if ((tag == "mn" || tag == "mi") && symbol!=null &&
	typeof symbol.func == "boolean" && symbol.func) {
			// Add space before \sin in 2\sin x or x\sin x
	  var space = AMcreateElementMathML("mspace");
	  space.setAttribute("width","0.167em");
	  node = AMcreateMmlNode("mrow",node);
	  node.appendChild(space);
      }
      newFrag.appendChild(node);
    }
  } while ((symbol.ttype != RIGHTBRACKET)
        && symbol!=null && symbol.output!="");
  tag = null;
  if (symbol.ttype == RIGHTBRACKET) {
    if (symbol.input == "\\right") { // right what?
      str = AMremoveCharsAndBlanks(str,symbol.input.length);
      symbol = AMgetSymbol(str);
      if (symbol != null && symbol.input == ".")
	symbol.invisible = true;
      if (symbol != null)
	tag = symbol.rtag;
    }
    if (symbol!=null)
      str = AMremoveCharsAndBlanks(str,symbol.input.length); // ready to return
    var len = newFrag.childNodes.length;
    if (matrix &&
      len>0 && newFrag.childNodes[len-1].nodeName == "mrow" && len>1 &&
      newFrag.childNodes[len-2].nodeName == "mo" &&
      newFrag.childNodes[len-2].firstChild.nodeValue == "&") { //matrix
	var pos = []; // positions of ampersands
        var m = newFrag.childNodes.length;
        for (i=0; matrix && i<m; i=i+2) {
          pos[i] = [];
          node = newFrag.childNodes[i];
	  for (var j=0; j<node.childNodes.length; j++)
	    if (node.childNodes[j].firstChild.nodeValue=="&")
	      pos[i][pos[i].length]=j;
        }
	var row, frag, n, k, table = document.createDocumentFragment();
	for (i=0; i<m; i=i+2) {
	  row = document.createDocumentFragment();
	  frag = document.createDocumentFragment();
	  node = newFrag.firstChild; // <mrow> -&-&...&-&- </mrow>
	  n = node.childNodes.length;
	  k = 0;
	  for (j=0; j<n; j++) {
	    if (typeof pos[i][k] != "undefined" && j==pos[i][k]){
	      node.removeChild(node.firstChild); //remove &
	      row.appendChild(AMcreateMmlNode("mtd",frag));
	      k++;
	    } else frag.appendChild(node.firstChild);
	  }
	  row.appendChild(AMcreateMmlNode("mtd",frag));
	  if (newFrag.childNodes.length>2) {
	    newFrag.removeChild(newFrag.firstChild); //remove <mrow> </mrow>
	    newFrag.removeChild(newFrag.firstChild); //remove <mo>&</mo>
	  }
	  table.appendChild(AMcreateMmlNode("mtr",row));
	}
	return [table,str];
    }
    if (typeof symbol.invisible != "boolean" || !symbol.invisible) {
      node = AMcreateMmlNode("mo",document.createTextNode(symbol.output));
      newFrag.appendChild(node);
    }
  }
  return [newFrag,str,tag];
}

function AMparseMath(str) {
  var result, node = AMcreateElementMathML("mstyle");
  if (mathcolor != "") node.setAttribute("mathcolor",mathcolor);
  if (mathfontfamily != "") node.setAttribute("fontfamily",mathfontfamily);
  node.appendChild(AMparseExpr(str.replace(/^\s+/g,""),false,false)[0]);
  node = AMcreateMmlNode("math",node);
  if (showasciiformulaonhover)                      //fixed by djhsu so newline
    node.setAttribute("title",str.replace(/\s+/g," "));//does not show in Gecko
  if (mathfontfamily != "" && (isIE || mathfontfamily != "serif")) {
    var fnode = AMcreateElementXHTML("font");
    fnode.setAttribute("face",mathfontfamily);
    fnode.appendChild(node);
    return fnode;
  }
  return node;
}

function AMstrarr2docFrag(arr, linebreaks) {
  var newFrag=document.createDocumentFragment();
  var expr = false;
  for (var i=0; i<arr.length; i++) {
    if (expr) newFrag.appendChild(AMparseMath(arr[i]));
    else {
      var arri = (linebreaks ? arr[i].split("\n\n") : [arr[i]]);
      newFrag.appendChild(AMcreateElementXHTML("span").
      appendChild(document.createTextNode(arri[0])));
      for (var j=1; j<arri.length; j++) {
        newFrag.appendChild(AMcreateElementXHTML("p"));
        newFrag.appendChild(AMcreateElementXHTML("span").
        appendChild(document.createTextNode(arri[j])));
      }
    }
    expr = !expr;
  }
  return newFrag;
}

function AMprocessNodeR(n, linebreaks) {
  var mtch, str, arr, frg, i;
  if (n.childNodes.length == 0) {
   if ((n.nodeType!=8 || linebreaks) &&
    n.parentNode.nodeName!="form" && n.parentNode.nodeName!="FORM" &&
    n.parentNode.nodeName!="textarea" && n.parentNode.nodeName!="TEXTAREA" &&
    n.parentNode.nodeName!="pre" && n.parentNode.nodeName!="PRE") {
    str = n.nodeValue;
    if (!(str == null)) {
      str = str.replace(/\r\n\r\n/g,"\n\n");
      str = str.replace(/\x20+/g," ");
      str = str.replace(/\s*\r\n/g," ");
// DELIMITERS:
      mtch = (str.indexOf("\$")==-1 ? false : true);
      str = str.replace(/([^\\])\$/g,"$1 \$");
      str = str.replace(/^\$/," \$");	// in case \$ at start of string
      arr = str.split(" \$");
      for (i=0; i<arr.length; i++)
	arr[i]=arr[i].replace(/\\\$/g,"\$");
      if (arr.length>1 || mtch) {
        if (checkForMathML) {
          checkForMathML = false;
          var nd = AMisMathMLavailable();
          AMnoMathML = nd != null;
          if (AMnoMathML && notifyIfNoMathML)
            if (alertIfNoMathML)
              alert("To view the ASCIIMathML notation use Internet Explorer 6 +\nMathPlayer (free from www.dessci.com)\n\
                or Firefox/Mozilla/Netscape");
            else AMbody.insertBefore(nd,AMbody.childNodes[0]);
        }
        if (!AMnoMathML) {
          frg = AMstrarr2docFrag(arr,n.nodeType==8);
          var len = frg.childNodes.length;
          n.parentNode.replaceChild(frg,n);
          return len-1;
        } else return 0;
      }
    }
   } else return 0;
  } else if (n.nodeName!="math") {
    for (i=0; i<n.childNodes.length; i++)
      i += AMprocessNodeR(n.childNodes[i], linebreaks);
  }
  return 0;
}

function AMprocessNode(n, linebreaks, spanclassAM) {
  var frag,st;
  if (spanclassAM!=null) {
    frag = document.getElementsByTagName("span")
    for (var i=0;i<frag.length;i++)
      if (frag[i].className == "AM")
        AMprocessNodeR(frag[i],linebreaks);
  } else {
    try {
      st = n.innerHTML;
    } catch(err) {}
// DELIMITERS:
    if (st==null || st.indexOf("\$")!=-1)
      AMprocessNodeR(n,linebreaks);
  }
  if (isIE) { //needed to match size and font of formula to surrounding text
    frag = document.getElementsByTagName('math');
    for (var i=0;i<frag.length;i++) frag[i].update()
  }
}

var AMbody;
var AMnoMathML = false, AMtranslated = false;

function translate(spanclassAM) {
  if (!AMtranslated) { // run this only once
    AMtranslated = true;
    AMinitSymbols();
    AMbody = document.getElementsByTagName("body")[0];
    AMprocessNode(AMbody, false, spanclassAM);
  }
}

if (isIE) { // avoid adding MathPlayer info explicitly to each webpage
  document.write("<object id=\"mathplayer\"\
  classid=\"clsid:32F66A20-7614-11D4-BD11-00104BD3F987\"></object>");
  document.write("<?import namespace=\"m\" implementation=\"#mathplayer\"?>");
}

// GO1.1 Generic onload by Brothercake
// http://www.brothercake.com/
//onload function (replaces the onload="translate()" in the <body> tag)
function generic()
{
  translate();
};
//setup onload function
if(typeof window.addEventListener != 'undefined')
{
  //.. gecko, safari, konqueror and standard
  window.addEventListener('load', generic, false);
}
else if(typeof document.addEventListener != 'undefined')
{
  //.. opera 7
  document.addEventListener('load', generic, false);
}
else if(typeof window.attachEvent != 'undefined')
{
  //.. win/ie
  window.attachEvent('onload', generic);
}
//** remove this condition to degrade older browsers
else
{
  //.. mac/ie5 and anything else that gets this far
  //if there's an existing onload function
  if(typeof window.onload == 'function')
  {
    //store it
    var existing = onload;
    //add new onload handler
    window.onload = function()
    {
      //call existing onload function
      existing();
      //call generic onload function
      generic();
    };
  }
  else
  {
    //setup onload function
    window.onload = generic;
  }
}
/*]]>*/
</script>
</head>
<body class="article">
<div id="header">
<div id="toc">
  <div id="toctitle">Table of Contents</div>
  <noscript><p><b>JavaScript must be enabled in your browser to display the table of contents.</b></p></noscript>
</div>
</div>
<div id="content">
<div class="sect1">
<h2 id="_tutorial_do_pov_ray">Tutorial do POV-Ray</h2>
<div class="sectionbody">
<div class="paragraph"><p>POV-Ray (Persistence of Vision Raytracer) é uma ferramenta open-source para produzir imagens fotorealísticas utilizando a técnica ray tracing. Através de uma linguagem similar ao C podemos descrever os objetos e a iluminação de uma cena. Este tutorial tem como objetivo proporcionar uma introdução à escrita de arquivos que descrevem a cena que desejamos renderizar com o povray, porém não substitui o tutorial fornecido pela <a href="http://www.povray.org/documentation/3.7.0/t2_0.html">página oficial</a>.</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_sistema_de_coordenadas">Sistema de coordenadas</h2>
<div class="sectionbody">
<div class="paragraph"><p>O POV-Ray utiliza o sistema de coordenadas da "mão esquerda".</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<img src="imagens/imagem6.png" alt="imagens/imagem6.png" width="300" height="250">
</div>
<div class="title">Figure 1. Sistema de coordenadas</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_compilação">Compilação</h2>
<div class="sectionbody">
<div class="paragraph"><p>O processo de síntese de imagens fotorealísticas pode ser obtido através da compilação de um arquivo com extensão ".pov" com o seguinte comando:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>povray <span style="color: #990000">&lt;</span>nome_arquivo<span style="color: #990000">&gt;.</span>pov</tt></pre></div></div>
<div class="paragraph"><p>Através deste comando é gerado uma imagem no formato PNG que contém a cena descrita pelo arquivo com extensão ".pov".</p></div>
</div>
</div>
<div class="sect1">
<h2 id="_renderização_de_objetos">Renderização de objetos</h2>
<div class="sectionbody">
<div class="paragraph"><p>Esta seção tem como objetivo fornecer os fundamentos para construção de uma cena com o POV-Ray. Este objetivo será alcançado através da análise do programa <a href="codes/basic_forms.pov">basic_forms.pov</a> que renderiza formas simples.</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<img src="codes/basic_forms.png" alt="codes/basic_forms.png" width="300" height="250">
</div>
<div class="title">Figure 2. Formas básicas renderizadas através do exemplo</div>
</div>
<div class="sect2">
<h3 id="_código">Código</h3>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * \file basic_forms.pov</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> *</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * \brief Arquivo para renderizacao de formas simples com o POV-Ray.</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> *</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * \author</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * Petrucio Ricardo Tavares de Medeiros \n</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * Universidade Federal do Rio Grande do Norte \n</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * Departamento de Computacao e Automacao Industrial \n</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * petrucior at gmail (dot) com</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> *</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * \version 1.0</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * \date November 2015</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> */</span></span>

<span style="font-style: italic"><span style="color: #9A1900">// Incluindo arquivos de definicao de cores, formas e texturas diversas</span></span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"colors.inc"</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"shapes.inc"</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"textures.inc"</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"stones.inc"</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"glass.inc"</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"metals.inc"</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"woods.inc"</span>


<span style="font-style: italic"><span style="color: #9A1900">// Camera</span></span>
camera<span style="color: #FF0000">{</span>
        location <span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">2</span><span style="color: #990000">,</span> <span style="color: #990000">-</span><span style="color: #993399">5</span><span style="color: #990000">&gt;</span>     <span style="font-style: italic"><span style="color: #9A1900">// Posicao da camera</span></span>
        look_at <span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">2</span><span style="color: #990000">&gt;</span>       <span style="font-style: italic"><span style="color: #9A1900">// Posicao visualizada</span></span>
<span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// Fonte de luz</span></span>
light_source<span style="color: #FF0000">{</span>
        <span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #990000">-</span><span style="color: #993399">2</span><span style="color: #990000">&gt;</span>      <span style="font-style: italic"><span style="color: #9A1900">// Posicao da fonte de luz</span></span>
        color White
<span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// -----------------------------------------------------</span></span>
<span style="font-style: italic"><span style="color: #9A1900">//                      CENA</span></span>
<span style="font-style: italic"><span style="color: #9A1900">// -----------------------------------------------------</span></span>

<span style="font-style: italic"><span style="color: #9A1900">// Fundo</span></span>
background<span style="color: #FF0000">{</span>
        <span style="color: #008080">color</span> Black             <span style="font-style: italic"><span style="color: #9A1900">// Definindo cor de fundo preta</span></span>
<span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// Plano</span></span>
plane<span style="color: #FF0000">{</span>
        <span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">&gt;,</span> <span style="color: #990000">-</span><span style="color: #993399">1</span>           <span style="font-style: italic"><span style="color: #9A1900">// Vetor normal do plano e tendendo ao infinito</span></span>
        pigment <span style="color: #FF0000">{</span>               <span style="font-style: italic"><span style="color: #9A1900">// Estabelecer a cor do objeto</span></span>
                <span style="font-style: italic"><span style="color: #9A1900">// Criacao de um xadrez com cores vermelho e azul</span></span>
                checker <span style="color: #008080">color</span> Red<span style="color: #990000">,</span> color Blue
        <span style="color: #FF0000">}</span>

        <span style="font-style: italic"><span style="color: #9A1900">// Propriedades de efeitos para aparência da superfície</span></span>
        finish <span style="color: #FF0000">{</span>
               diffuse <span style="color: #993399">0.4</span>
               ambient <span style="color: #993399">0.2</span>
               reflection <span style="color: #993399">0.25</span>
        <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// Esfera</span></span>
sphere<span style="color: #FF0000">{</span>
        <span style="color: #990000">&lt;-</span><span style="color: #993399">1.5</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">3</span><span style="color: #990000">&gt;,</span> <span style="color: #993399">1</span>         <span style="font-style: italic"><span style="color: #9A1900">// Vetor de posicao da esfera e raio da esfera</span></span>
        texture<span style="color: #FF0000">{</span>                <span style="font-style: italic"><span style="color: #9A1900">// Define a aparencia da esfera</span></span>
                pigment<span style="color: #FF0000">{</span>        <span style="font-style: italic"><span style="color: #9A1900">// Estabelecer a cor do objeto</span></span>
                        White_Marble   <span style="font-style: italic"><span style="color: #9A1900">// predefinida em textures.inc</span></span>
                        scale <span style="color: #993399">0.5</span>      <span style="font-style: italic"><span style="color: #9A1900">// fator de escala da textura</span></span>
                <span style="color: #FF0000">}</span>
        <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// Caixa</span></span>
box<span style="color: #FF0000">{</span>
        <span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">&gt;,</span>  <span style="font-style: italic"><span style="color: #9A1900">// Canto mais proximo do lado esquerdo</span></span>
        <span style="color: #990000">&lt;</span><span style="color: #993399">2</span><span style="color: #990000">,</span> <span style="color: #993399">0.5</span><span style="color: #990000">,</span> <span style="color: #993399">2</span><span style="color: #990000">&gt;</span>   <span style="font-style: italic"><span style="color: #9A1900">// Canto mais distante do lado direito</span></span>
        texture <span style="color: #FF0000">{</span>
                T_Stone25     <span style="font-style: italic"><span style="color: #9A1900">// Predefinido em stones.inc</span></span>
                scale <span style="color: #993399">2</span>       <span style="font-style: italic"><span style="color: #9A1900">// Escala pela mesma quantidade em todas as direcoes</span></span>
        <span style="color: #FF0000">}</span>
        <span style="color: #008080">rotate</span> y<span style="color: #990000">*</span><span style="color: #993399">20</span>     <span style="font-style: italic"><span style="color: #9A1900">// Rotaciona "&lt;0,20,0&gt;"</span></span>
<span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// Cone</span></span>
cone<span style="color: #FF0000">{</span>
        <span style="color: #990000">&lt;</span><span style="color: #993399">0.5</span><span style="color: #990000">,</span> <span style="color: #993399">3</span><span style="color: #990000">,</span> <span style="color: #993399">2.5</span><span style="color: #990000">&gt;,</span> <span style="color: #993399">0.3</span>    <span style="font-style: italic"><span style="color: #9A1900">// Centro e raio de um lado ( pico )</span></span>
        <span style="color: #990000">&lt;</span><span style="color: #993399">0.5</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">2.5</span><span style="color: #990000">&gt;,</span> <span style="color: #993399">1.0</span>    <span style="font-style: italic"><span style="color: #9A1900">// Centro e raio do outro lado ( base )</span></span>
        texture <span style="color: #FF0000">{</span>
                pigment<span style="color: #FF0000">{</span>
                        <span style="color: #008080">color</span> Red       <span style="font-style: italic"><span style="color: #9A1900">// Cor predefinida em colors.inc</span></span>
                <span style="color: #FF0000">}</span>
        <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// Cilindro</span></span>
cylinder<span style="color: #FF0000">{</span>
        <span style="color: #990000">&lt;-</span><span style="color: #993399">2</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">&gt;,</span>     <span style="font-style: italic"><span style="color: #9A1900">// Centro de um dos lados</span></span>
        <span style="color: #990000">&lt;-</span><span style="color: #993399">3</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">2.5</span><span style="color: #990000">&gt;,</span>     <span style="font-style: italic"><span style="color: #9A1900">// Centro do outro lado</span></span>
        <span style="color: #993399">0.5</span>            <span style="font-style: italic"><span style="color: #9A1900">// Raio</span></span>
        open           <span style="font-style: italic"><span style="color: #9A1900">// Remover as tampas do cilindro</span></span>
        texture <span style="color: #FF0000">{</span>
                pigment<span style="color: #FF0000">{</span>
                        <span style="font-style: italic"><span style="color: #9A1900">// Cor definida atraves do formato rgb + transparencia</span></span>
                        <span style="color: #008080">color</span> rgbt<span style="color: #990000">&lt;</span><span style="color: #993399">0.7</span><span style="color: #990000">,</span> <span style="color: #993399">0.2</span><span style="color: #990000">,</span> <span style="color: #993399">0.6</span><span style="color: #990000">,</span> <span style="color: #993399">0.2</span><span style="color: #990000">&gt;</span>
                <span style="color: #FF0000">}</span>
        <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// Torus</span></span>
torus<span style="color: #FF0000">{</span>
        <span style="color: #993399">0.3</span><span style="color: #990000">,</span> <span style="color: #993399">0.2</span>        <span style="font-style: italic"><span style="color: #9A1900">// Raio maior e menor, respectivamente</span></span>
        texture <span style="color: #FF0000">{</span>
                Sapphire_Agate
        <span style="color: #FF0000">}</span>
        rotate <span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">&gt;</span>        <span style="font-style: italic"><span style="color: #9A1900">// Rotacionando o torus</span></span>
        translate <span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #990000">-</span><span style="color: #993399">1</span><span style="color: #990000">&gt;</span>    <span style="font-style: italic"><span style="color: #9A1900">// Translacao do objeto</span></span>
<span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// Construindo um calice atraves de SOR (Surface of Revolution)</span></span>
<span style="font-weight: bold"><span style="color: #000080">#declare</span></span> calice <span style="color: #990000">=</span> sor<span style="color: #FF0000">{</span>
         <span style="color: #993399">8</span><span style="color: #990000">,</span>     <span style="font-style: italic"><span style="color: #9A1900">// Quantidade de pontos</span></span>
         <span style="color: #990000">&lt;</span><span style="color: #993399">0.0</span><span style="color: #990000">,</span>  <span style="color: #990000">-</span><span style="color: #993399">0.5</span><span style="color: #990000">&gt;,</span>
         <span style="color: #990000">&lt;</span><span style="color: #993399">3.0</span><span style="color: #990000">,</span>   <span style="color: #993399">0.0</span><span style="color: #990000">&gt;,</span>
         <span style="color: #990000">&lt;</span><span style="color: #993399">1.0</span><span style="color: #990000">,</span>   <span style="color: #993399">0.2</span><span style="color: #990000">&gt;,</span>
         <span style="color: #990000">&lt;</span><span style="color: #993399">0.5</span><span style="color: #990000">,</span>   <span style="color: #993399">0.4</span><span style="color: #990000">&gt;,</span>
         <span style="color: #990000">&lt;</span><span style="color: #993399">0.5</span><span style="color: #990000">,</span>   <span style="color: #993399">4.0</span><span style="color: #990000">&gt;,</span>
         <span style="color: #990000">&lt;</span><span style="color: #993399">1.0</span><span style="color: #990000">,</span>   <span style="color: #993399">5.0</span><span style="color: #990000">&gt;,</span>
         <span style="color: #990000">&lt;</span><span style="color: #993399">3.0</span><span style="color: #990000">,</span>  <span style="color: #993399">10.0</span><span style="color: #990000">&gt;,</span>
         <span style="color: #990000">&lt;</span><span style="color: #993399">4.0</span><span style="color: #990000">,</span>  <span style="color: #993399">11.0</span><span style="color: #990000">&gt;</span>
         open   <span style="font-style: italic"><span style="color: #9A1900">// Abrir lados</span></span>
         texture<span style="color: #FF0000">{</span>  <span style="font-style: italic"><span style="color: #9A1900">// Definicao da textura</span></span>
                pigment<span style="color: #FF0000">{</span>
                        Col_Glass_Dark_Green
                <span style="color: #FF0000">}</span>
         <span style="color: #FF0000">}</span>
         translate <span style="color: #990000">&lt;</span><span style="color: #993399">6.5</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #990000">-</span><span style="color: #993399">7</span><span style="color: #990000">&gt;</span> <span style="font-style: italic"><span style="color: #9A1900">// Translacao do objeto</span></span>
         scale <span style="color: #993399">0.15</span>             <span style="font-style: italic"><span style="color: #9A1900">// Modificando a escala do objeto</span></span>
<span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// Chamando o objeto criado pela superficie de revolucao</span></span>
calice

<span style="font-style: italic"><span style="color: #9A1900">// -----------------------------------------------------</span></span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_descrição_do_programa">Descrição do programa</h3>
<div class="paragraph"><p>Foram incluídas nas primeiras linhas do arquivo todas as bibliotecas de cores, formas e texturas necessárias para a construção da cena.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"colors.inc"</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"shapes.inc"</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"textures.inc"</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"stones.inc"</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"glass.inc"</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"metals.inc"</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"woods.inc"</span></tt></pre></div></div>
<div class="paragraph"><p>Logo após foram definidas as posições da câmera e local visualizado através de uma estrutura primitiva do POV-Ray para configuração de câmera.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>camera<span style="color: #FF0000">{</span>
        location <span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">2</span><span style="color: #990000">,</span> <span style="color: #990000">-</span><span style="color: #993399">5</span><span style="color: #990000">&gt;</span>     <span style="font-style: italic"><span style="color: #9A1900">// Posicao da camera</span></span>
        look_at <span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">2</span><span style="color: #990000">&gt;</span>       <span style="font-style: italic"><span style="color: #9A1900">// Posicao visualizada</span></span>
<span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="paragraph"><p>A cena só poderá ser visualizada se houver uma fonte de luz e por isso o próximo passo é a definição da fonte de luz. No POV-Ray há uma estrutura para configuração da fonte de luz que exige como parâmetros a posição e a cor da luz.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>light_source<span style="color: #FF0000">{</span>
        <span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #990000">-</span><span style="color: #993399">2</span><span style="color: #990000">&gt;</span>      <span style="font-style: italic"><span style="color: #9A1900">// Posicao da fonte de luz</span></span>
        <span style="color: #008080">color</span> White     <span style="font-style: italic"><span style="color: #9A1900">// Definida no arquivo colors.inc</span></span>
<span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="paragraph"><p>Necessitamos estabelecer uma cor de blackground que será utilizada quando o raio não interceptar o objeto. De acordo com o ray tracing retornamos o valor de background da cena.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>background<span style="color: #FF0000">{</span>
        <span style="color: #008080">color</span> Black             <span style="font-style: italic"><span style="color: #9A1900">// Definindo cor de fundo preta</span></span>
<span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="paragraph"><p>Adicionamos uma superfície plana no eixo xz, ou seja, que tem como normal o vetor &lt;0, 1, 0&gt; e a distância a qual neste exemplo foi setada com -1 que apresenta o plano até o infinito. Este plano foi pintado com um xadrez vermelho e azul e definido efeitos com a função finish.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>plane<span style="color: #FF0000">{</span>
        <span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">&gt;,</span> <span style="color: #990000">-</span><span style="color: #993399">1</span>           <span style="font-style: italic"><span style="color: #9A1900">// Vetor normal do plano e tendendo ao infinito</span></span>
        pigment <span style="color: #FF0000">{</span>               <span style="font-style: italic"><span style="color: #9A1900">// Estabelecer a cor do objeto</span></span>
                <span style="font-style: italic"><span style="color: #9A1900">// Criacao de um xadrez com cores vermelho e azul</span></span>
                checker <span style="color: #008080">color</span> Red<span style="color: #990000">,</span> color Blue
        <span style="color: #FF0000">}</span>

        <span style="font-style: italic"><span style="color: #9A1900">// Propriedades de efeitos para aparência da superfície</span></span>
        finish <span style="color: #FF0000">{</span>
               diffuse <span style="color: #993399">0.4</span>
               ambient <span style="color: #993399">0.2</span>
               reflection <span style="color: #993399">0.25</span>
        <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="paragraph"><p>Para adicionarmos uma esfera foi necessário apenas definir sua posição e raio além da sua textura.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>sphere<span style="color: #FF0000">{</span>
        <span style="color: #990000">&lt;-</span><span style="color: #993399">1.5</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">3</span><span style="color: #990000">&gt;,</span> <span style="color: #993399">1</span>         <span style="font-style: italic"><span style="color: #9A1900">// Vetor de posicao da esfera e raio da esfera</span></span>
        texture<span style="color: #FF0000">{</span>                <span style="font-style: italic"><span style="color: #9A1900">// Define a aparencia da esfera</span></span>
                pigment<span style="color: #FF0000">{</span>        <span style="font-style: italic"><span style="color: #9A1900">// Estabelecer a cor do objeto</span></span>
                                   White_Marble   <span style="font-style: italic"><span style="color: #9A1900">// predefinida em textures.inc</span></span>
                        scale <span style="color: #993399">0.5</span>      <span style="font-style: italic"><span style="color: #9A1900">// fator de escala da textura</span></span>
                <span style="color: #FF0000">}</span>
        <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="paragraph"><p>Para colocarmos uma caixa foi necessário definir a posição de canto mais próximo do lado esquerdo e do lado mais distante do lado direito.</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<img src="imagens/imagem7.png" alt="imagens/imagem7.png" width="300" height="250">
</div>
<div class="title">Figure 3. Estabelecendo cantos inferior esquerdo e superior direito</div>
</div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>box<span style="color: #FF0000">{</span>
        <span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">&gt;,</span>  <span style="font-style: italic"><span style="color: #9A1900">// Canto mais proximo do lado esquerdo</span></span>
        <span style="color: #990000">&lt;</span><span style="color: #993399">2</span><span style="color: #990000">,</span> <span style="color: #993399">0.5</span><span style="color: #990000">,</span> <span style="color: #993399">2</span><span style="color: #990000">&gt;</span>   <span style="font-style: italic"><span style="color: #9A1900">// Canto mais distante do lado direito</span></span>
        texture <span style="color: #FF0000">{</span>
                T_Stone25     <span style="font-style: italic"><span style="color: #9A1900">// Predefinido em stones.inc</span></span>
                scale <span style="color: #993399">2</span>       <span style="font-style: italic"><span style="color: #9A1900">// Escala pela mesma quantidade em todas as direcoes</span></span>
        <span style="color: #FF0000">}</span>
        <span style="color: #008080">rotate</span> y<span style="color: #990000">*</span><span style="color: #993399">20</span>     <span style="font-style: italic"><span style="color: #9A1900">// Rotaciona "&lt;0,20,0&gt;"</span></span>
<span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="paragraph"><p>Adicionamos um cone definindo a posição e o raio do pico e da base, um cilindro pela definição das posições onde serão posicionadas os lados e o raio destes lados. Note que há um open no meio do código do cilindro que informa se desejamos retirar as tampas do cilindro e outra coisa que devemos notar foi a definição da cor que utilizamos o formato RGBA. O penúltimo objeto que adicionamos neste exemplo foi o torus e para isso necessitamos apenas definir o valor de raio maior e menor.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">// Cone</span></span>
cone<span style="color: #FF0000">{</span>
        <span style="color: #990000">&lt;</span><span style="color: #993399">0.5</span><span style="color: #990000">,</span> <span style="color: #993399">3</span><span style="color: #990000">,</span> <span style="color: #993399">2.5</span><span style="color: #990000">&gt;,</span> <span style="color: #993399">0.3</span>    <span style="font-style: italic"><span style="color: #9A1900">// Centro e raio de um lado ( pico )</span></span>
        <span style="color: #990000">&lt;</span><span style="color: #993399">0.5</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">2.5</span><span style="color: #990000">&gt;,</span> <span style="color: #993399">1.0</span>    <span style="font-style: italic"><span style="color: #9A1900">// Centro e raio do outro lado ( base )</span></span>
        texture <span style="color: #FF0000">{</span>
                pigment<span style="color: #FF0000">{</span>
                                <span style="color: #008080">color</span> Red       <span style="font-style: italic"><span style="color: #9A1900">// Cor predefinida em colors.inc</span></span>
                                        <span style="color: #FF0000">}</span>
        <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>

cylinder<span style="color: #FF0000">{</span>
        <span style="color: #990000">&lt;-</span><span style="color: #993399">2</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">&gt;,</span>     <span style="font-style: italic"><span style="color: #9A1900">// Centro de um dos lados</span></span>
        <span style="color: #990000">&lt;-</span><span style="color: #993399">3</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">2.5</span><span style="color: #990000">&gt;,</span>   <span style="font-style: italic"><span style="color: #9A1900">// Centro do outro lado</span></span>
        <span style="color: #993399">0.5</span>            <span style="font-style: italic"><span style="color: #9A1900">// Raio</span></span>
        open           <span style="font-style: italic"><span style="color: #9A1900">// Remover as tampas do cilindro</span></span>
        texture <span style="color: #FF0000">{</span>
                pigment<span style="color: #FF0000">{</span>
                        <span style="font-style: italic"><span style="color: #9A1900">// Cor definida atraves do formato rgb + transparencia</span></span>
                        <span style="color: #008080">color</span> rgbt<span style="color: #990000">&lt;</span><span style="color: #993399">0.7</span><span style="color: #990000">,</span> <span style="color: #993399">0.2</span><span style="color: #990000">,</span> <span style="color: #993399">0.6</span><span style="color: #990000">,</span> <span style="color: #993399">0.2</span><span style="color: #990000">&gt;</span>
                        <span style="color: #FF0000">}</span>
        <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>

torus<span style="color: #FF0000">{</span>
        <span style="color: #993399">0.3</span><span style="color: #990000">,</span> <span style="color: #993399">0.2</span>        <span style="font-style: italic"><span style="color: #9A1900">// Raio maior e menor, respectivamente</span></span>
        texture <span style="color: #FF0000">{</span>
                Sapphire_Agate
        <span style="color: #FF0000">}</span>
        rotate <span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">&gt;</span>        <span style="font-style: italic"><span style="color: #9A1900">// Rotacionando o torus</span></span>
        translate <span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #990000">-</span><span style="color: #993399">1</span><span style="color: #990000">&gt;</span>    <span style="font-style: italic"><span style="color: #9A1900">// Translacao do objeto</span></span>
<span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="paragraph"><p>Por fim inserimos um cálice através da função de superfície de revolução provido pelo pacote do POV-Ray. Neste exemplo descrevemos todos os pontos importantes para a modelagem do cálice.</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<img src="imagens/imagem8.png" alt="imagens/imagem8.png" width="300" height="250">
</div>
<div class="title">Figure 4. Pontos da modelagem do cálice</div>
</div>
<div class="paragraph"><p>Após a definição dos pontos podemos inserir estes na função SOR (Surface of Revolution) onde o primeiro argumento é a quantidade de pontos e em seguida os pontos. Se utilizarmos a declaração da superficie de revolução necessitamos chamar a superfície abaixo.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000080">#declare</span></span> calice <span style="color: #990000">=</span> sor<span style="color: #FF0000">{</span>
         <span style="color: #993399">8</span><span style="color: #990000">,</span>     <span style="font-style: italic"><span style="color: #9A1900">// Quantidade de pontos</span></span>
         <span style="color: #990000">&lt;</span><span style="color: #993399">0.0</span><span style="color: #990000">,</span>  <span style="color: #990000">-</span><span style="color: #993399">0.5</span><span style="color: #990000">&gt;,</span>
         <span style="color: #990000">&lt;</span><span style="color: #993399">3.0</span><span style="color: #990000">,</span>   <span style="color: #993399">0.0</span><span style="color: #990000">&gt;,</span>
         <span style="color: #990000">&lt;</span><span style="color: #993399">1.0</span><span style="color: #990000">,</span>   <span style="color: #993399">0.2</span><span style="color: #990000">&gt;,</span>
         <span style="color: #990000">&lt;</span><span style="color: #993399">0.5</span><span style="color: #990000">,</span>   <span style="color: #993399">0.4</span><span style="color: #990000">&gt;,</span>
         <span style="color: #990000">&lt;</span><span style="color: #993399">0.5</span><span style="color: #990000">,</span>   <span style="color: #993399">4.0</span><span style="color: #990000">&gt;,</span>
         <span style="color: #990000">&lt;</span><span style="color: #993399">1.0</span><span style="color: #990000">,</span>   <span style="color: #993399">5.0</span><span style="color: #990000">&gt;,</span>
         <span style="color: #990000">&lt;</span><span style="color: #993399">3.0</span><span style="color: #990000">,</span>  <span style="color: #993399">10.0</span><span style="color: #990000">&gt;,</span>
         <span style="color: #990000">&lt;</span><span style="color: #993399">4.0</span><span style="color: #990000">,</span>  <span style="color: #993399">11.0</span><span style="color: #990000">&gt;</span>
         open   <span style="font-style: italic"><span style="color: #9A1900">// Abrir lados</span></span>
         texture<span style="color: #FF0000">{</span>  <span style="font-style: italic"><span style="color: #9A1900">// Definicao da textura</span></span>
                pigment<span style="color: #FF0000">{</span>
                        Col_Glass_Dark_Green
                <span style="color: #FF0000">}</span>
         <span style="color: #FF0000">}</span>
         translate <span style="color: #990000">&lt;</span><span style="color: #993399">6.5</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #990000">-</span><span style="color: #993399">7</span><span style="color: #990000">&gt;</span> <span style="font-style: italic"><span style="color: #9A1900">// Translacao do objeto</span></span>
         scale <span style="color: #993399">0.15</span>             <span style="font-style: italic"><span style="color: #9A1900">// Modificando a escala do objeto</span></span>
<span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// Chamando o objeto criado pela superficie de revolucao</span></span>
calice</tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_exercício">Exercício</h3>
<div class="ulist"><ul>
<li>
<p>
Construir uma cena fazendo uso do POV-Ray com o objetivo de renderizar a cena representada pela imagem abaixo.
</p>
</li>
</ul></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<img src="imagens/imagem9.jpg" alt="imagens/imagem9.jpg" width="300" height="250">
</div>
<div class="title">Figure 5. Imagem real</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_animação">Animação</h2>
<div class="sectionbody">
<div class="paragraph"><p>Para a construção da animação é necessário a criação de um arquivo com extensão ".ini" que contém as informações da quantidade de frames que haverá no vídeo, qual o arquivo ".pov" que estamos utilizando para criar as cenas além do tempo de duração. Com o objetivo de demonstrar a criação de uma animação com o POV-Ray construimos uma nova cena.
O comando para a renderização das cenas foram obtidas através do seguinte comando:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>povray <span style="color: #990000">&lt;</span>nome_arquivo<span style="color: #990000">&gt;.</span>pov <span style="color: #990000">&lt;</span>nome_arquivo<span style="color: #990000">&gt;.</span>ini</tt></pre></div></div>
<div class="paragraph"><p>Após a criação das imagens é preciso somente aplicar os seguintes comandos no diretório onde se encontra os arquivos das imagens geradadas:</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>cat <span style="color: #990000">*.</span>png <span style="color: #990000">&gt;</span> video<span style="color: #990000">.</span>avi
<span style="color: #008080">mplayer</span> video<span style="color: #990000">.</span>avi</tt></pre></div></div>
<iframe width="420" height="315" src="https://www.youtube.com/embed/JWDKQR8JaGk" frameborder="0" allowfullscreen></iframe>
<div class="sect2">
<h3 id="_construção_da_cena">Construção da cena</h3>
<div class="paragraph"><p>Realizando algumas alterações na cena criada por Friedrich A. Lohmueller, na qual podemos visualizar uma canoa sob a água e um céu com núvens, somos capazes de criar uma animação.</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<img src="codes/canoa.png" alt="codes/canoa.png" width="300">
</div>
<div class="title">Figure 6. Canoa</div>
</div>
</div>
<div class="sect2">
<h3 id="_código_da_cena">Código da cena</h3>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">/**</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * \file canoa.pov</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> *</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * \brief Arquivo para renderizacao de uma canoa.</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> *</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * \author</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * Friedrich A. Lohmueller</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * </span></span><span style="text-decoration: underline"><span style="color: #0000FF">http://www.f-lohmueller.de/pov_tut/x_sam/tec_550e.htm</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> *</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * \modified by</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * Petrucio Ricardo Tavares de Medeiros \n</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * Universidade Federal do Rio Grande do Norte \n</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * Departamento de Computacao e Automacao Industrial \n</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * petrucior at gmail (dot) com</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> *</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * \version 1.0</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> * \date November 2015</span></span>
<span style="font-style: italic"><span style="color: #9A1900"> */</span></span>

<span style="font-weight: bold"><span style="color: #000080">#global_settings</span></span><span style="color: #FF0000">{</span> assumed_gamma <span style="color: #993399">1.0</span> <span style="color: #FF0000">}</span>
<span style="font-weight: bold"><span style="color: #000080">#default</span></span><span style="color: #FF0000">{</span> finish<span style="color: #FF0000">{</span> ambient <span style="color: #993399">0.1</span> diffuse <span style="color: #993399">0.7</span> <span style="color: #FF0000">}}</span>

<span style="font-style: italic"><span style="color: #9A1900">// Arquivos de descricao de cores, formas e texturas</span></span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"colors.inc"</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"shapes.inc"</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"textures.inc"</span>

<span style="font-style: italic"><span style="color: #9A1900">// Camera</span></span>
camera<span style="color: #FF0000">{</span>
        location <span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">1.5</span><span style="color: #990000">,</span> <span style="color: #990000">-</span><span style="color: #993399">8</span><span style="color: #990000">&gt;</span>   <span style="font-style: italic"><span style="color: #9A1900">// Posicao da camera</span></span>
        look_at <span style="color: #990000">&lt;</span><span style="color: #993399">0.4</span><span style="color: #990000">,</span> <span style="color: #993399">0.2</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">&gt;</span>   <span style="font-style: italic"><span style="color: #9A1900">// Posicao de visualizacao</span></span>
<span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// Fonte de luz</span></span>
light_source<span style="color: #FF0000">{</span><span style="color: #990000">&lt;</span><span style="color: #993399">1500</span><span style="color: #990000">,</span><span style="color: #993399">2500</span><span style="color: #990000">,-</span><span style="color: #993399">2500</span><span style="color: #990000">&gt;</span> <span style="color: #008080">color</span> rgb<span style="color: #990000">&lt;</span><span style="color: #993399">1</span><span style="color: #990000">,</span><span style="color: #993399">0.9</span><span style="color: #990000">,</span><span style="color: #993399">0.8</span><span style="color: #990000">&gt;</span><span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// Ceu</span></span>
sky_sphere<span style="color: #FF0000">{</span>
        <span style="font-style: italic"><span style="color: #9A1900">/// Cor azul com gradiente</span></span>
        pigment<span style="color: #FF0000">{</span>
                <span style="color: #008080">gradient</span> y      <span style="font-style: italic"><span style="color: #9A1900">// Gradiente em torno do eixo y</span></span>
                <span style="font-style: italic"><span style="color: #9A1900">// Mapa de cores</span></span>
                color_map<span style="color: #FF0000">{</span>
                        <span style="color: #990000">[</span><span style="color: #993399">0.000</span> <span style="color: #993399">0.002</span> <span style="color: #008080">color</span> rgb <span style="color: #990000">&lt;</span><span style="color: #993399">1.0</span><span style="color: #990000">,</span> <span style="color: #993399">0.2</span><span style="color: #990000">,</span> <span style="color: #993399">0.0</span><span style="color: #990000">&gt;</span> <span style="color: #008080">color</span> rgb <span style="color: #990000">&lt;</span><span style="color: #993399">1.0</span><span style="color: #990000">,</span> <span style="color: #993399">0.2</span><span style="color: #990000">,</span> <span style="color: #993399">0.0</span><span style="color: #990000">&gt;]</span>
                        <span style="color: #990000">[</span><span style="color: #993399">0.002</span> <span style="color: #993399">0.200</span> <span style="color: #008080">color</span> rgb <span style="color: #990000">&lt;</span><span style="color: #993399">0.8</span><span style="color: #990000">,</span> <span style="color: #993399">0.1</span><span style="color: #990000">,</span> <span style="color: #993399">0.0</span><span style="color: #990000">&gt;</span> <span style="color: #008080">color</span> rgb <span style="color: #990000">&lt;</span><span style="color: #993399">0.2</span><span style="color: #990000">,</span> <span style="color: #993399">0.2</span><span style="color: #990000">,</span> <span style="color: #993399">0.3</span><span style="color: #990000">&gt;]</span>
                <span style="color: #FF0000">}</span>
        scale <span style="color: #993399">2</span>                 <span style="font-style: italic"><span style="color: #9A1900">// Escala de distribuicao do mapa e gradiente pela esfera</span></span>
        translate <span style="color: #990000">-</span><span style="color: #993399">1</span>            <span style="font-style: italic"><span style="color: #9A1900">// Translacao -1 em todas as direcoes</span></span>
        <span style="color: #FF0000">}</span>
        <span style="font-style: italic"><span style="color: #9A1900">// Nuvens</span></span>
        pigment <span style="color: #FF0000">{</span>
                bozo            <span style="font-style: italic"><span style="color: #9A1900">// Função randomica de ruido que tradicionalmente modela as nuvens</span></span>
                <span style="font-style: italic"><span style="color: #9A1900">// Variaveis para denotar uma grandeza aleatória</span></span>
                turbulence <span style="color: #993399">0.65</span>
                octaves <span style="color: #993399">6</span>
                omega <span style="color: #993399">0.7</span>
                lambda <span style="color: #993399">2</span>
                <span style="font-style: italic"><span style="color: #9A1900">// Mapa de cores</span></span>
                color_map <span style="color: #FF0000">{</span>
                          <span style="color: #990000">[</span><span style="color: #993399">0.0</span> <span style="color: #993399">0.1</span> <span style="color: #008080">color</span> rgb <span style="color: #990000">&lt;</span><span style="color: #993399">0.85</span><span style="color: #990000">,</span> <span style="color: #993399">0.85</span><span style="color: #990000">,</span> <span style="color: #993399">0.85</span><span style="color: #990000">&gt;</span> <span style="color: #008080">color</span> rgb <span style="color: #990000">&lt;</span><span style="color: #993399">0.75</span><span style="color: #990000">,</span> <span style="color: #993399">0.75</span><span style="color: #990000">,</span> <span style="color: #993399">0.75</span><span style="color: #990000">&gt;]</span>
                          <span style="color: #990000">[</span><span style="color: #993399">0.1</span> <span style="color: #993399">0.5</span> <span style="color: #008080">color</span> rgb <span style="color: #990000">&lt;</span><span style="color: #993399">0.75</span><span style="color: #990000">,</span> <span style="color: #993399">0.75</span><span style="color: #990000">,</span> <span style="color: #993399">0.75</span><span style="color: #990000">&gt;</span> <span style="color: #008080">color</span> rgbt <span style="color: #990000">&lt;</span><span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">&gt;]</span>
                          <span style="color: #990000">[</span><span style="color: #993399">0.5</span> <span style="color: #993399">1.0</span> <span style="color: #008080">color</span> rgbt <span style="color: #990000">&lt;</span><span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">&gt;</span> <span style="color: #008080">color</span> rgbt <span style="color: #990000">&lt;</span><span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">&gt;]</span>
                <span style="color: #FF0000">}</span>
                <span style="font-style: italic"><span style="color: #9A1900">// Escala de distribuicao do mapa pela esfera</span></span>
                scale <span style="color: #990000">&lt;</span><span style="color: #993399">0.2</span><span style="color: #990000">,</span> <span style="color: #993399">0.5</span><span style="color: #990000">,</span> <span style="color: #993399">0.2</span><span style="color: #990000">&gt;</span>
        <span style="color: #FF0000">}</span>
        rotate <span style="color: #990000">-</span><span style="color: #993399">135</span><span style="color: #990000">*</span>x
<span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// Plano onde sera inserida a canoa e a agua</span></span>
plane<span style="color: #FF0000">{</span>
        <span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">1</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">&gt;,</span> <span style="color: #993399">1</span> <span style="font-style: italic"><span style="color: #9A1900">// Plano xz (normal para a coordenada y)</span></span>
        hollow      <span style="font-style: italic"><span style="color: #9A1900">// Plano dentro da esfera</span></span>
        texture<span style="color: #FF0000">{</span>
                pigment<span style="color: #FF0000">{</span>
                        bozo
                        turbulence <span style="color: #993399">0.92</span>
                        color_map<span style="color: #FF0000">{</span> <span style="color: #990000">[</span><span style="color: #993399">0.00</span> rgb <span style="color: #990000">&lt;</span><span style="color: #993399">0.20</span><span style="color: #990000">,</span> <span style="color: #993399">0.20</span><span style="color: #990000">,</span> <span style="color: #993399">1.0</span><span style="color: #990000">&gt;*</span><span style="color: #993399">0.9</span><span style="color: #990000">]</span>
                                   <span style="color: #990000">[</span><span style="color: #993399">0.50</span> rgb <span style="color: #990000">&lt;</span><span style="color: #993399">0.20</span><span style="color: #990000">,</span> <span style="color: #993399">0.20</span><span style="color: #990000">,</span> <span style="color: #993399">1.0</span><span style="color: #990000">&gt;*</span><span style="color: #993399">0.9</span><span style="color: #990000">]</span>
                                   <span style="color: #990000">[</span><span style="color: #993399">0.70</span> rgb <span style="color: #990000">&lt;</span><span style="color: #993399">1</span><span style="color: #990000">,</span><span style="color: #993399">1</span><span style="color: #990000">,</span><span style="color: #993399">1</span><span style="color: #990000">&gt;]</span>
                                   <span style="color: #990000">[</span><span style="color: #993399">0.85</span> rgb <span style="color: #990000">&lt;</span><span style="color: #993399">0.25</span><span style="color: #990000">,</span><span style="color: #993399">0.25</span><span style="color: #990000">,</span><span style="color: #993399">0.25</span><span style="color: #990000">&gt;]</span>
                                   <span style="color: #990000">[</span><span style="color: #993399">1.0</span> rgb <span style="color: #990000">&lt;</span><span style="color: #993399">0.5</span><span style="color: #990000">,</span><span style="color: #993399">0.5</span><span style="color: #990000">,</span><span style="color: #993399">0.5</span><span style="color: #990000">&gt;]</span>
                        <span style="color: #FF0000">}</span>
                        scale<span style="color: #990000">&lt;</span><span style="color: #993399">1</span><span style="color: #990000">,</span><span style="color: #993399">1</span><span style="color: #990000">,</span><span style="color: #993399">1.5</span><span style="color: #990000">&gt;*</span><span style="color: #993399">2.5</span>  translate<span style="color: #990000">&lt;</span> <span style="color: #990000">-</span><span style="color: #993399">1.25</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">&gt;</span>
                <span style="color: #FF0000">}</span>
                finish <span style="color: #FF0000">{</span>ambient <span style="color: #993399">1</span> diffuse <span style="color: #993399">0</span><span style="color: #FF0000">}</span>
        <span style="color: #FF0000">}</span>
        scale <span style="color: #993399">10000</span>
<span style="color: #FF0000">}</span>


<span style="font-style: italic"><span style="color: #9A1900">// Posicao da canoa</span></span>
<span style="font-weight: bold"><span style="color: #000080">#declare</span></span> posicao_canoa <span style="color: #990000">=</span> transform<span style="color: #FF0000">{</span><span style="font-style: italic"><span style="color: #9A1900">/*rotate&lt;0,30,0&gt;*/</span></span> <span style="color: #008080">rotate&lt;0, 360*clock, 0&gt;</span> translate<span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">1</span><span style="color: #990000">&gt;</span><span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// Canoa</span></span>
<span style="font-weight: bold"><span style="color: #000080">#declare</span></span> lado_fora_canoa <span style="color: #990000">=</span> sphere<span style="color: #FF0000">{</span> <span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">&gt;,</span><span style="color: #993399">1</span> scale <span style="color: #990000">&lt;</span><span style="color: #993399">3</span><span style="color: #990000">,</span><span style="color: #993399">1.5</span><span style="color: #990000">,</span><span style="color: #993399">1</span><span style="color: #990000">&gt;</span> <span style="color: #008080">rotate&lt;0,0,0&gt;</span> translate<span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">0.5</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">&gt;</span> <span style="color: #FF0000">}</span>

<span style="font-weight: bold"><span style="color: #000080">#declare</span></span> canoa <span style="color: #990000">=</span>
         <span style="font-weight: bold"><span style="color: #0000FF">union</span></span><span style="color: #FF0000">{</span>
                <span style="font-style: italic"><span style="color: #9A1900">// Construcao da estrutura da canoa</span></span>
                intersection<span style="color: #FF0000">{</span>
                        object<span style="color: #FF0000">{</span> lado_fora_canoa <span style="color: #FF0000">}</span>
                        object<span style="color: #FF0000">{</span> <span style="color: #008080">lado_fora_canoa</span> scale <span style="color: #990000">&lt;</span><span style="color: #993399">0.98</span><span style="color: #990000">,</span><span style="color: #993399">0.95</span><span style="color: #990000">,</span><span style="color: #993399">0.94</span><span style="color: #990000">&gt;</span>  inverse<span style="color: #FF0000">}</span>
                        sphere <span style="color: #FF0000">{</span><span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">&gt;,</span><span style="color: #993399">1</span> scale <span style="color: #990000">&lt;</span><span style="color: #993399">2.5</span><span style="color: #990000">,</span><span style="color: #993399">1</span><span style="color: #990000">,</span><span style="color: #993399">20</span><span style="color: #990000">&gt;</span> <span style="color: #008080">rotate&lt;0,0,0&gt; translate&lt;0,1.3,0&gt;</span>  inverse<span style="color: #FF0000">}</span>
                        texture<span style="color: #FF0000">{</span>
                                 pigment<span style="color: #FF0000">{</span>
                                          <span style="color: #008080">color</span> White<span style="font-style: italic"><span style="color: #9A1900">//White*1.1</span></span>
                                 <span style="color: #FF0000">}</span>
                                 finish<span style="color: #FF0000">{</span>
                                         phong <span style="color: #993399">1</span>
                                 <span style="color: #FF0000">}</span>
                        <span style="color: #FF0000">}</span>
                <span style="color: #FF0000">}</span>

                <span style="font-style: italic"><span style="color: #9A1900">// Interseção entre a estrutura e os pedaços de madeira</span></span>
                intersection<span style="color: #FF0000">{</span>
                        object<span style="color: #FF0000">{</span> lado_fora_canoa
                                texture<span style="color: #FF0000">{</span>
                                          pigment<span style="color: #FF0000">{</span>
                                                 <span style="color: #008080">color</span> White<span style="color: #990000">*</span><span style="color: #993399">1.1</span>
                                          <span style="color: #FF0000">}</span>
                                          finish<span style="color: #FF0000">{</span>
                                                phong <span style="color: #993399">1</span>
                                          <span style="color: #FF0000">}</span>
                                <span style="color: #FF0000">}</span>
                        <span style="color: #FF0000">}</span>
                        <span style="font-style: italic"><span style="color: #9A1900">// Adicionando madeiras dentro da canoa</span></span>
                        <span style="font-weight: bold"><span style="color: #0000FF">union</span></span><span style="color: #FF0000">{</span>
                                box <span style="color: #FF0000">{</span><span style="color: #990000">&lt;-</span><span style="color: #993399">0.20</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">,-</span><span style="color: #993399">1</span><span style="color: #990000">&gt;,&lt;</span><span style="color: #993399">0.20</span><span style="color: #990000">,</span><span style="color: #993399">0.05</span><span style="color: #990000">,</span><span style="color: #993399">1</span><span style="color: #990000">&gt;</span> <span style="color: #008080">rotate&lt;0,0,0&gt;</span> translate<span style="color: #990000">&lt;</span> <span style="color: #993399">0.0</span><span style="color: #990000">,</span><span style="color: #993399">0.21</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">&gt;</span><span style="color: #FF0000">}</span>
                                box <span style="color: #FF0000">{</span><span style="color: #990000">&lt;-</span><span style="color: #993399">0.20</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">,-</span><span style="color: #993399">1</span><span style="color: #990000">&gt;,&lt;</span><span style="color: #993399">0.20</span><span style="color: #990000">,</span><span style="color: #993399">0.05</span><span style="color: #990000">,</span><span style="color: #993399">1</span><span style="color: #990000">&gt;</span> <span style="color: #008080">rotate&lt;0,0,-10&gt;</span> translate<span style="color: #990000">&lt;-</span><span style="color: #993399">2.0</span><span style="color: #990000">,</span><span style="color: #993399">0.40</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">&gt;</span><span style="color: #FF0000">}</span>
                                box <span style="color: #FF0000">{</span><span style="color: #990000">&lt;-</span><span style="color: #993399">0.20</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">,-</span><span style="color: #993399">1</span><span style="color: #990000">&gt;,&lt;</span><span style="color: #993399">0.20</span><span style="color: #990000">,</span><span style="color: #993399">0.05</span><span style="color: #990000">,</span><span style="color: #993399">1</span><span style="color: #990000">&gt;</span> <span style="color: #008080">rotate&lt;0,0,10&gt;</span> translate<span style="color: #990000">&lt;</span> <span style="color: #993399">2.0</span><span style="color: #990000">,</span><span style="color: #993399">0.40</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">&gt;</span><span style="color: #FF0000">}</span>
                                texture<span style="color: #FF0000">{</span>
                                        pigment<span style="color: #FF0000">{</span>
                                                color MediumWood
                                        <span style="color: #FF0000">}</span>
                                        finish<span style="color: #FF0000">{</span>
                                                phong <span style="color: #993399">1</span>
                                        <span style="color: #FF0000">}</span>
                                <span style="color: #FF0000">}</span>
                        <span style="color: #FF0000">}</span>
                <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span>

object<span style="color: #FF0000">{</span> canoa <span style="color: #008080">transform</span> posicao_canoa<span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// Agua</span></span>
difference<span style="color: #FF0000">{</span>
        plane<span style="color: #FF0000">{</span><span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">1</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">&gt;,</span> <span style="color: #993399">0</span> <span style="color: #FF0000">}</span>
        object<span style="color: #FF0000">{</span>lado_fora_canoa <span style="color: #008080">transform</span> posicao_canoa <span style="color: #FF0000">}</span>
        texture<span style="color: #FF0000">{</span>
                Polished_Chrome
                normal<span style="color: #FF0000">{</span> crackle <span style="color: #993399">1</span> scale <span style="color: #993399">5</span> turbulence <span style="color: #993399">1</span> translate<span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">5</span><span style="color: #990000">&gt;</span><span style="color: #FF0000">}</span>
                finish<span style="color: #FF0000">{</span> diffuse <span style="color: #993399">0.5</span> reflection <span style="color: #993399">0.30</span><span style="color: #FF0000">}</span>
        <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_descrição_do_programa_2">Descrição do programa</h3>
<div class="paragraph"><p>Antes de serem incluídos os pacotes com definições para a renderização da cena é setado o gamma, valor que tem intuito de deixar mais claro ou mais escuro a imagem, e os parâmetros de constante de ambiente e difusão utilizados na equação de Phong.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000080">#global_settings</span></span><span style="color: #FF0000">{</span> assumed_gamma <span style="color: #993399">1.0</span> <span style="color: #FF0000">}</span>
<span style="font-weight: bold"><span style="color: #000080">#default</span></span><span style="color: #FF0000">{</span> finish<span style="color: #FF0000">{</span> ambient <span style="color: #993399">0.1</span> diffuse <span style="color: #993399">0.7</span> <span style="color: #FF0000">}}</span></tt></pre></div></div>
<div class="paragraph"><p>São incluídos os pacotes com definições de cores, formas e texturas.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"colors.inc"</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"shapes.inc"</span>
<span style="font-weight: bold"><span style="color: #000080">#include</span></span> <span style="color: #FF0000">"textures.inc"</span></tt></pre></div></div>
<div class="paragraph"><p>Logo após foram definidas as posições da câmera e local visualizado através de uma estrutura primitiva do POV-Ray para configuração de câmera.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>camera<span style="color: #FF0000">{</span>
        location <span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span> <span style="color: #993399">1.5</span><span style="color: #990000">,</span> <span style="color: #990000">-</span><span style="color: #993399">8</span><span style="color: #990000">&gt;</span>   <span style="font-style: italic"><span style="color: #9A1900">// Posicao da camera</span></span>
        look_at <span style="color: #990000">&lt;</span><span style="color: #993399">0.4</span><span style="color: #990000">,</span> <span style="color: #993399">0.2</span><span style="color: #990000">,</span> <span style="color: #993399">0</span><span style="color: #990000">&gt;</span>   <span style="font-style: italic"><span style="color: #9A1900">// Posicao de visualizacao</span></span>
<span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="paragraph"><p>Definição da fonte de luz com a posição e sua cor.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>light_source<span style="color: #FF0000">{</span><span style="color: #990000">&lt;</span><span style="color: #993399">1500</span><span style="color: #990000">,</span><span style="color: #993399">2500</span><span style="color: #990000">,-</span><span style="color: #993399">2500</span><span style="color: #990000">&gt;</span> <span style="color: #008080">color</span> rgb<span style="color: #990000">&lt;</span><span style="color: #993399">1</span><span style="color: #990000">,</span><span style="color: #993399">0.9</span><span style="color: #990000">,</span><span style="color: #993399">0.8</span><span style="color: #990000">&gt;</span><span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="paragraph"><p>A construção de um céu azul com núvens é realizada através de uma esfera com gradiente. O gradiente proporcionará uma cor mais escura quanto mais distante da reta do horizonte.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>sky_sphere<span style="color: #FF0000">{</span>
        <span style="font-style: italic"><span style="color: #9A1900">// Cor azul com gradiente</span></span>
        pigment<span style="color: #FF0000">{</span>
                <span style="color: #008080">gradient</span> y      <span style="font-style: italic"><span style="color: #9A1900">// Gradiente em torno do eixo y</span></span>
                <span style="font-style: italic"><span style="color: #9A1900">// Mapa de cores</span></span>
                color_map<span style="color: #FF0000">{</span>
                        <span style="color: #990000">[</span><span style="color: #993399">0.000</span> <span style="color: #993399">0.002</span> <span style="color: #008080">color</span> rgb <span style="color: #990000">&lt;</span><span style="color: #993399">1.0</span><span style="color: #990000">,</span> <span style="color: #993399">0.2</span><span style="color: #990000">,</span> <span style="color: #993399">0.0</span><span style="color: #990000">&gt;</span> <span style="color: #008080">color</span> rgb <span style="color: #990000">&lt;</span><span style="color: #993399">1.0</span><span style="color: #990000">,</span> <span style="color: #993399">0.2</span><span style="color: #990000">,</span> <span style="color: #993399">0.0</span><span style="color: #990000">&gt;]</span>
                        <span style="color: #990000">[</span><span style="color: #993399">0.002</span> <span style="color: #993399">0.200</span> <span style="color: #008080">color</span> rgb <span style="color: #990000">&lt;</span><span style="color: #993399">0.8</span><span style="color: #990000">,</span> <span style="color: #993399">0.1</span><span style="color: #990000">,</span> <span style="color: #993399">0.0</span><span style="color: #990000">&gt;</span> <span style="color: #008080">color</span> rgb <span style="color: #990000">&lt;</span><span style="color: #993399">0.2</span><span style="color: #990000">,</span> <span style="color: #993399">0.2</span><span style="color: #990000">,</span> <span style="color: #993399">0.3</span><span style="color: #990000">&gt;]</span>
                <span style="color: #FF0000">}</span>
                scale <span style="color: #993399">2</span>         <span style="font-style: italic"><span style="color: #9A1900">// Escala de distribuição do mapa e gradiente pela esfera</span></span>
                translate <span style="color: #990000">-</span><span style="color: #993399">1</span>    <span style="font-style: italic"><span style="color: #9A1900">// Translacao -1 em todas as direcoes</span></span>
        <span style="color: #FF0000">}</span>
        <span style="font-style: italic"><span style="color: #9A1900">// Nuvens</span></span>
        pigment <span style="color: #FF0000">{</span>
                bozo            <span style="font-style: italic"><span style="color: #9A1900">// Função randomica de ruido que tradicionalmente modela as nuvens</span></span>
                <span style="font-style: italic"><span style="color: #9A1900">// Variaveis para denotar uma grandeza aleatória</span></span>
                turbulence <span style="color: #993399">0.65</span>
                octaves <span style="color: #993399">6</span>
                omega <span style="color: #993399">0.7</span>
                lambda <span style="color: #993399">2</span>
                <span style="font-style: italic"><span style="color: #9A1900">// Mapa de cores</span></span>
                color_map <span style="color: #FF0000">{</span>
                          <span style="color: #990000">[</span><span style="color: #993399">0.0</span> <span style="color: #993399">0.1</span> <span style="color: #008080">color</span> rgb <span style="color: #990000">&lt;</span><span style="color: #993399">0.85</span><span style="color: #990000">,</span> <span style="color: #993399">0.85</span><span style="color: #990000">,</span> <span style="color: #993399">0.85</span><span style="color: #990000">&gt;</span> <span style="color: #008080">color</span> rgb <span style="color: #990000">&lt;</span><span style="color: #993399">0.75</span><span style="color: #990000">,</span> <span style="color: #993399">0.75</span><span style="color: #990000">,</span> <span style="color: #993399">0.75</span><span style="color: #990000">&gt;]</span>
                          <span style="color: #990000">[</span><span style="color: #993399">0.1</span> <span style="color: #993399">0.5</span> <span style="color: #008080">color</span> rgb <span style="color: #990000">&lt;</span><span style="color: #993399">0.75</span><span style="color: #990000">,</span> <span style="color: #993399">0.75</span><span style="color: #990000">,</span> <span style="color: #993399">0.75</span><span style="color: #990000">&gt;</span> <span style="color: #008080">color</span> rgbt <span style="color: #990000">&lt;</span><span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">&gt;]</span>
                          <span style="color: #990000">[</span><span style="color: #993399">0.5</span> <span style="color: #993399">1.0</span> <span style="color: #008080">color</span> rgbt <span style="color: #990000">&lt;</span><span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">&gt;</span> <span style="color: #008080">color</span> rgbt <span style="color: #990000">&lt;</span><span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">,</span> <span style="color: #993399">1</span><span style="color: #990000">&gt;]</span>
                <span style="color: #FF0000">}</span>
                <span style="font-style: italic"><span style="color: #9A1900">// Escala de distribuição do mapa pela esfera</span></span>
                scale <span style="color: #990000">&lt;</span><span style="color: #993399">0.2</span><span style="color: #990000">,</span> <span style="color: #993399">0.5</span><span style="color: #990000">,</span> <span style="color: #993399">0.2</span><span style="color: #990000">&gt;</span>
        <span style="color: #FF0000">}</span>
        rotate <span style="color: #990000">-</span><span style="color: #993399">135</span><span style="color: #990000">*</span>x
<span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="paragraph"><p>A inclusão de um plano onde será adicionada a água e a canoa. No terceiro argumento do plano indica que o plano é construído dentro da esfera que contém o céu.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>plane<span style="color: #FF0000">{</span>
        <span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">1</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">&gt;,</span> <span style="color: #993399">1</span> <span style="font-style: italic"><span style="color: #9A1900">// Plano xz (normal para a coordenada y)</span></span>
        hollow      <span style="font-style: italic"><span style="color: #9A1900">// Plano dentro da esfera</span></span>
        texture<span style="color: #FF0000">{</span>
                pigment<span style="color: #FF0000">{</span>
                        bozo
                        turbulence <span style="color: #993399">0.92</span>
                        color_map<span style="color: #FF0000">{</span> <span style="color: #990000">[</span><span style="color: #993399">0.00</span> rgb <span style="color: #990000">&lt;</span><span style="color: #993399">0.20</span><span style="color: #990000">,</span> <span style="color: #993399">0.20</span><span style="color: #990000">,</span> <span style="color: #993399">1.0</span><span style="color: #990000">&gt;*</span><span style="color: #993399">0.9</span><span style="color: #990000">]</span>
                                   <span style="color: #990000">[</span><span style="color: #993399">0.50</span> rgb <span style="color: #990000">&lt;</span><span style="color: #993399">0.20</span><span style="color: #990000">,</span> <span style="color: #993399">0.20</span><span style="color: #990000">,</span> <span style="color: #993399">1.0</span><span style="color: #990000">&gt;*</span><span style="color: #993399">0.9</span><span style="color: #990000">]</span>
                                   <span style="color: #990000">[</span><span style="color: #993399">0.70</span> rgb <span style="color: #990000">&lt;</span><span style="color: #993399">1</span><span style="color: #990000">,</span><span style="color: #993399">1</span><span style="color: #990000">,</span><span style="color: #993399">1</span><span style="color: #990000">&gt;]</span>
                                   <span style="color: #990000">[</span><span style="color: #993399">0.85</span> rgb <span style="color: #990000">&lt;</span><span style="color: #993399">0.25</span><span style="color: #990000">,</span><span style="color: #993399">0.25</span><span style="color: #990000">,</span><span style="color: #993399">0.25</span><span style="color: #990000">&gt;]</span>
                                   <span style="color: #990000">[</span><span style="color: #993399">1.0</span> rgb <span style="color: #990000">&lt;</span><span style="color: #993399">0.5</span><span style="color: #990000">,</span><span style="color: #993399">0.5</span><span style="color: #990000">,</span><span style="color: #993399">0.5</span><span style="color: #990000">&gt;]</span>
                        <span style="color: #FF0000">}</span>
                        scale<span style="color: #990000">&lt;</span><span style="color: #993399">1</span><span style="color: #990000">,</span><span style="color: #993399">1</span><span style="color: #990000">,</span><span style="color: #993399">1.5</span><span style="color: #990000">&gt;*</span><span style="color: #993399">2.5</span>  translate<span style="color: #990000">&lt;</span> <span style="color: #990000">-</span><span style="color: #993399">1.25</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">&gt;</span>
                <span style="color: #FF0000">}</span>
                finish <span style="color: #FF0000">{</span>ambient <span style="color: #993399">1</span> diffuse <span style="color: #993399">0</span><span style="color: #FF0000">}</span>
        <span style="color: #FF0000">}</span>
        scale <span style="color: #993399">10000</span>
<span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="paragraph"><p>Definição da posição da canoa e a estrutura do lado de fora da canoa. Perceba que não foi colocada nenhuma textura na estrutura da canoa e isto é devido aos passos de construção de toda a canoa.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">// Posicao da canoa</span></span>
<span style="font-weight: bold"><span style="color: #000080">#declare</span></span> posicao_canoa <span style="color: #990000">=</span> transform<span style="color: #FF0000">{</span> <span style="color: #008080">rotate&lt;0,30,0&gt;</span> translate<span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">1</span><span style="color: #990000">&gt;</span> <span style="color: #FF0000">}</span>

<span style="font-style: italic"><span style="color: #9A1900">// Canoa</span></span>
<span style="font-weight: bold"><span style="color: #000080">#declare</span></span> lado_fora_canoa <span style="color: #990000">=</span> sphere<span style="color: #FF0000">{</span> <span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">&gt;,</span><span style="color: #993399">1</span> scale <span style="color: #990000">&lt;</span><span style="color: #993399">3</span><span style="color: #990000">,</span><span style="color: #993399">1.5</span><span style="color: #990000">,</span><span style="color: #993399">1</span><span style="color: #990000">&gt;</span> <span style="color: #008080">rotate&lt;0,0,0&gt;</span> translate<span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">0.5</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">&gt;</span> <span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="paragraph"><p>A construção da estrutura da canoa pode ser compreendida como a interseção entre uma esfera e sua inversa, ou seja, a parte de fora igual a parte interna e também com outra esfera com a forma de uma elipse sem textura.</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<img src="imagens/imagem10.jpg" alt="imagens/imagem10.jpg" width="300">
</div>
<div class="title">Figure 7. Construção da estrutura da canoa</div>
</div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">// Construcao da estrutura da canoa</span></span>
intersection<span style="color: #FF0000">{</span>
        object<span style="color: #FF0000">{</span> lado_fora_canoa <span style="color: #FF0000">}</span>       <span style="font-style: italic"><span style="color: #9A1900">// Esfera para a canoa</span></span>
        object<span style="color: #FF0000">{</span> <span style="color: #008080">lado_fora_canoa</span> scale <span style="color: #990000">&lt;</span><span style="color: #993399">0.98</span><span style="color: #990000">,</span><span style="color: #993399">0.95</span><span style="color: #990000">,</span><span style="color: #993399">0.94</span><span style="color: #990000">&gt;</span>  inverse<span style="color: #FF0000">}</span> <span style="font-style: italic"><span style="color: #9A1900">// Esfera para a canoa inversa</span></span>
        sphere <span style="color: #FF0000">{</span><span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">&gt;,</span><span style="color: #993399">1</span> scale <span style="color: #990000">&lt;</span><span style="color: #993399">2.5</span><span style="color: #990000">,</span><span style="color: #993399">1</span><span style="color: #990000">,</span><span style="color: #993399">20</span><span style="color: #990000">&gt;</span> <span style="color: #008080">rotate&lt;0,0,0&gt; translate&lt;0,1.3,0&gt;</span>  inverse<span style="color: #FF0000">}</span> <span style="font-style: italic"><span style="color: #9A1900">// Elipse</span></span>
               texture <span style="color: #FF0000">{</span>
                        pigment <span style="color: #FF0000">{</span>
                               <span style="color: #008080">color</span> White<span style="font-style: italic"><span style="color: #9A1900">//White*1.1</span></span>
                        <span style="color: #FF0000">}</span>
                        finish <span style="color: #FF0000">{</span>
                               phong <span style="color: #993399">1</span>
                        <span style="color: #FF0000">}</span>
                <span style="color: #FF0000">}</span>
        <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="paragraph"><p>A interseção entre a estrutura da canoa e os pedaços de madeiras.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="font-style: italic"><span style="color: #9A1900">// Interseção entre a estrutura e os pedaços de madeira</span></span>
intersection<span style="color: #FF0000">{</span>
        object<span style="color: #FF0000">{</span> lado_fora_canoa
                texture <span style="color: #FF0000">{</span>
                        pigment <span style="color: #FF0000">{</span>
                                <span style="color: #008080">color</span> White<span style="color: #990000">*</span><span style="color: #993399">1.1</span>
                        <span style="color: #FF0000">}</span>
                        finish <span style="color: #FF0000">{</span>
                               phong <span style="color: #993399">1</span>
                        <span style="color: #FF0000">}</span>
                <span style="color: #FF0000">}</span>
        <span style="color: #FF0000">}</span>
        <span style="font-style: italic"><span style="color: #9A1900">// Adicionando madeiras dentro da canoa</span></span>
        <span style="font-weight: bold"><span style="color: #0000FF">union</span></span><span style="color: #FF0000">{</span>
                box <span style="color: #FF0000">{</span><span style="color: #990000">&lt;-</span><span style="color: #993399">0.20</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">,-</span><span style="color: #993399">1</span><span style="color: #990000">&gt;,&lt;</span><span style="color: #993399">0.20</span><span style="color: #990000">,</span><span style="color: #993399">0.05</span><span style="color: #990000">,</span><span style="color: #993399">1</span><span style="color: #990000">&gt;</span> <span style="color: #008080">rotate&lt;0,0,0&gt;</span> translate<span style="color: #990000">&lt;</span> <span style="color: #993399">0.0</span><span style="color: #990000">,</span><span style="color: #993399">0.21</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">&gt;</span><span style="color: #FF0000">}</span>
                box <span style="color: #FF0000">{</span><span style="color: #990000">&lt;-</span><span style="color: #993399">0.20</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">,-</span><span style="color: #993399">1</span><span style="color: #990000">&gt;,&lt;</span><span style="color: #993399">0.20</span><span style="color: #990000">,</span><span style="color: #993399">0.05</span><span style="color: #990000">,</span><span style="color: #993399">1</span><span style="color: #990000">&gt;</span> <span style="color: #008080">rotate&lt;0,0,-10&gt;</span> translate<span style="color: #990000">&lt;-</span><span style="color: #993399">2.0</span><span style="color: #990000">,</span><span style="color: #993399">0.40</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">&gt;</span><span style="color: #FF0000">}</span>
                box <span style="color: #FF0000">{</span><span style="color: #990000">&lt;-</span><span style="color: #993399">0.20</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">,-</span><span style="color: #993399">1</span><span style="color: #990000">&gt;,&lt;</span><span style="color: #993399">0.20</span><span style="color: #990000">,</span><span style="color: #993399">0.05</span><span style="color: #990000">,</span><span style="color: #993399">1</span><span style="color: #990000">&gt;</span> <span style="color: #008080">rotate&lt;0,0,10&gt;</span> translate<span style="color: #990000">&lt;</span> <span style="color: #993399">2.0</span><span style="color: #990000">,</span><span style="color: #993399">0.40</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">&gt;</span><span style="color: #FF0000">}</span>
                texture<span style="color: #FF0000">{</span>
                        pigment<span style="color: #FF0000">{</span>
                                color MediumWood
                        <span style="color: #FF0000">}</span>
                        finish<span style="color: #FF0000">{</span>
                                phong <span style="color: #993399">1</span>
                        <span style="color: #FF0000">}</span>
                <span style="color: #FF0000">}</span>
        <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="paragraph"><p>Após a confecção das duas partes anteriores é realizada uma união destas duas estruturas e então é realizada a construção da canoa.</p></div>
<div class="imageblock" style="text-align:center;">
<div class="content">
<img src="imagens/imagem11.jpg" alt="imagens/imagem11.jpg" width="300">
</div>
<div class="title">Figure 8. Construção da canoa completa</div>
</div>
<div class="paragraph"><p>Depois é realizada a transformação para colocar a canoa na posição correta.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>object<span style="color: #FF0000">{</span> canoa <span style="color: #008080">transform</span> posicao_canoa<span style="color: #FF0000">}</span></tt></pre></div></div>
<div class="paragraph"><p>A fim de terminar com a construção da cena basta inserir a água acima do plano e para isso utilizamos a função de diferença entre o plano, a canoa e a textura da água.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>difference<span style="color: #FF0000">{</span>
        plane<span style="color: #FF0000">{</span><span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">1</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">&gt;,</span> <span style="color: #993399">0</span> <span style="color: #FF0000">}</span>
        object<span style="color: #FF0000">{</span>lado_fora_canoa <span style="color: #008080">transform</span> posicao_canoa <span style="color: #FF0000">}</span>
        texture<span style="color: #FF0000">{</span>
                Polished_Chrome
                normal<span style="color: #FF0000">{</span> crackle <span style="color: #993399">1</span> scale <span style="color: #993399">5</span> turbulence <span style="color: #993399">1</span> translate<span style="color: #990000">&lt;</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">0</span><span style="color: #990000">,</span><span style="color: #993399">5</span><span style="color: #990000">&gt;</span><span style="color: #FF0000">}</span>
                finish<span style="color: #FF0000">{</span> diffuse <span style="color: #993399">0.5</span> reflection <span style="color: #993399">0.30</span><span style="color: #FF0000">}</span>
        <span style="color: #FF0000">}</span>
<span style="color: #FF0000">}</span></tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_código_do_controle">Código do controle</h3>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt><span style="color: #990000">;**</span>
 <span style="color: #990000">;*</span> <span style="color: #990000">\</span><span style="color: #008080">file</span> canoa<span style="color: #990000">.</span>ini
 <span style="color: #990000">;*</span>
 <span style="color: #990000">;*</span> <span style="color: #990000">\</span>brief Controle da animação <span style="color: #008080">de</span> canoa<span style="color: #990000">.</span>pov
 <span style="color: #990000">;*</span>
 <span style="color: #990000">;*</span> <span style="color: #990000">\</span>author
 <span style="color: #990000">;*</span> Petrucio Ricardo Tavares <span style="color: #008080">de</span> Medeiros <span style="color: #990000">\</span>n
 <span style="color: #990000">;*</span> Universidade Federal <span style="font-weight: bold"><span style="color: #0000FF">do</span></span> Rio Grande <span style="color: #008080">do</span> Norte <span style="color: #990000">\</span>n
 <span style="color: #990000">;*</span> Departamento de Computacao e <span style="color: #008080">Automacao</span> Industrial <span style="color: #990000">\</span>n
 <span style="color: #990000">;*</span> petrucior <span style="color: #008080">at</span> <span style="font-weight: bold"><span style="color: #000000">gmail</span></span> <span style="color: #990000">(</span>dot<span style="color: #990000">)</span> com
 <span style="color: #990000">;*</span>
 <span style="color: #990000">;*</span> http<span style="color: #990000">:</span><span style="font-style: italic"><span style="color: #9A1900">//www.f-lohmueller.de/pov_tut/animate/pov_anie.htm</span></span>
 <span style="color: #990000">;*</span>
 <span style="color: #990000">;*</span> <span style="color: #990000">\</span>version <span style="color: #993399">1.0</span>
 <span style="color: #990000">;*</span> <span style="color: #990000">\</span>date November <span style="color: #993399">2015</span>
 <span style="color: #990000">;*</span>

Input_File_Name<span style="color: #990000">=</span><span style="color: #FF0000">"canoa.pov"</span>     <span style="color: #990000">;</span> Nome <span style="font-weight: bold"><span style="color: #0000FF">do</span></span> arquivo que contem a cena

Initial_Frame<span style="color: #990000">=</span><span style="color: #993399">1</span>                 <span style="color: #990000">;</span> Inicia com o frame numero <span style="color: #993399">1</span>
Final_Frame<span style="color: #990000">=</span><span style="color: #993399">30</span>                  <span style="color: #990000">;</span> Finaliza com o frame numero <span style="color: #993399">30</span>
Initial_Clock<span style="color: #990000">=</span><span style="color: #993399">0</span>                 <span style="color: #990000">;</span> Inicia com o clock <span style="color: #993399">0</span>
Final_Clock<span style="color: #990000">=</span><span style="color: #993399">1</span>                   <span style="color: #990000">;</span> Finaliza com o clock <span style="color: #993399">1</span>

Cyclic_Animation<span style="color: #990000">=</span>On             <span style="color: #990000">;</span> Ativa a <span style="color: #008080">animacao</span> <span style="font-weight: bold"><span style="color: #000000">ciclica</span></span> <span style="color: #990000">(</span>causa a divisao <span style="color: #008080">do</span> clock<span style="color: #990000">)</span>
Pause_when_Done<span style="color: #990000">=</span>Off             <span style="color: #990000">;</span> Sem pausar quando finalizar o programa</tt></pre></div></div>
</div>
<div class="sect2">
<h3 id="_descrição_do_programa_3">Descrição do programa</h3>
<div class="paragraph"><p>Necessitamos modificar o arquivo com extensão ".pov" para depender do clock e assim passar o arquivo ".pov", que renderiza a cena, para a variável "Input_File_Name".</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>Input_File_Name<span style="color: #990000">=</span><span style="color: #FF0000">"canoa.pov"</span>     <span style="color: #990000">;</span> Nome <span style="font-weight: bold"><span style="color: #0000FF">do</span></span> arquivo que contem a cena</tt></pre></div></div>
<div class="paragraph"><p>Definimos qual é o frame inicial e final além do clock inicial e final.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>Initial_Frame<span style="color: #990000">=</span><span style="color: #993399">1</span>         <span style="color: #990000">;</span> Inicia com o frame numero <span style="color: #993399">1</span>
Final_Frame<span style="color: #990000">=</span><span style="color: #993399">30</span>          <span style="color: #990000">;</span> Finaliza com o frame numero <span style="color: #993399">30</span>
Initial_Clock<span style="color: #990000">=</span><span style="color: #993399">0</span>         <span style="color: #990000">;</span> Inicia com o clock <span style="color: #993399">0</span>
Final_Clock<span style="color: #990000">=</span><span style="color: #993399">1</span>           <span style="color: #990000">;</span> Finaliza com o clock <span style="color: #993399">1</span></tt></pre></div></div>
<div class="paragraph"><p>Ativação da animação ciclíca para permitar a subdivisão do clock e não permitir o pausar após a finalização da renderização.</p></div>
<div class="listingblock">
<div class="content"><!-- Generator: GNU source-highlight 3.1.6
by Lorenzo Bettini
http://www.lorenzobettini.it
http://www.gnu.org/software/src-highlite -->
<pre><tt>Cyclic_Animation<span style="color: #990000">=</span>On             <span style="color: #990000">;</span> Ativa a <span style="color: #008080">animacao</span> <span style="font-weight: bold"><span style="color: #000000">ciclica</span></span> <span style="color: #990000">(</span>causa a divisao <span style="color: #008080">do</span> clock<span style="color: #990000">)</span>
Pause_when_Done<span style="color: #990000">=</span>Off             <span style="color: #990000">;</span> Sem pausar quando finalizar o programa</tt></pre></div></div>
</div>
</div>
</div>
</div>
<div id="footnotes"><hr></div>
<div id="footer">
<div id="footer-text">
Last updated 2015-11-09 02:44:15 BRT
</div>
</div>
</body>
</html>
